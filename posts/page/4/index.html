<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>Posts | sergem's personal public notebook</title>
<meta name=keywords content>
<meta name=description content="Personal public notebook">
<meta name=author content="serge-m">
<link rel=canonical href=https://serge-m.github.io/posts/>
<link href=/assets/css/stylesheet.min.6d98a2276d0cb41ef459267b3ff3ef02df70a8f16b70bbc52b20568702bc90cf.css integrity="sha256-bZiiJ20MtB70WSZ7P/PvAt9wqPFrcLvFKyBWhwK8kM8=" rel="preload stylesheet" as=style>
<link rel=icon href=https://serge-m.github.io/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://serge-m.github.io/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://serge-m.github.io/favicon-32x32.png>
<link rel=apple-touch-icon href=https://serge-m.github.io/apple-touch-icon.png>
<link rel=mask-icon href=https://serge-m.github.io/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.92.1">
<link rel=alternate type=application/rss+xml href=https://serge-m.github.io/posts/index.xml>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-40853494-2','auto'),ga('send','pageview'))</script><meta property="og:title" content="Posts">
<meta property="og:description" content="Personal public notebook">
<meta property="og:type" content="website">
<meta property="og:url" content="https://serge-m.github.io/posts/"><meta property="og:image" content="https://serge-m.github.io/papermod-cover.png">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://serge-m.github.io/papermod-cover.png">
<meta name=twitter:title content="Posts">
<meta name=twitter:description content="Personal public notebook">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://serge-m.github.io/posts/"}]}</script>
</head>
<body class=list id=top>
<script>window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<noscript>
<style type=text/css>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://serge-m.github.io/ accesskey=h title="Home (Alt + H)">Home</a>
<span class=logo-switches>
</span>
</div>
<ul id=menu onscroll=menu_on_scroll()>
<li>
<a href=https://serge-m.github.io/archives title=Archive>
<span>Archive</span>
</a>
</li>
<li>
<a href=https://serge-m.github.io/categories/ title=Categories>
<span>Categories</span>
</a>
</li>
<li>
<a href=https://serge-m.github.io/search/ title="Search (Alt + /)" accesskey=/>
<span>Search</span>
</a>
</li>
<li>
<a href=https://serge-m.github.io/tags/ title=Tags>
<span>Tags</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<header class=page-header><div class=breadcrumbs><a href=https://serge-m.github.io/>Home</a></div>
<h1>Posts</h1>
</header>
<article class=post-entry>
<header class=entry-header>
<h2>OKRs</h2>
</header>
<section class=entry-content>
<p>We had a production system written by mathematicians, 50 different stakeholders with conflicting targets, five leadership changes during last year, a dozen of microservices, AWS costs of 10 thousands per week,
hole galaxy of legacy databases, cron jobs, Celery, greenlets, … Also, unstable API as a dependency, 10 Gb of text dumps as output, user input without validation, false alarms in monitoring, and two dozen unprotected public endpoints. Not that we needed all that for the work, but once you get locked into a serious agile development, the tendency is to push it as far as you can....</p>
</section>
<footer class=entry-footer>July 4, 2018&nbsp;·&nbsp;SergeM</footer>
<a class=entry-link aria-label="post link to OKRs" href=https://serge-m.github.io/posts/okrs/></a>
</article>
<article class=post-entry>
<header class=entry-header>
<h2>Bokeh in jupyter notebooks for interactive plots</h2>
</header>
<section class=entry-content>
<p>Bokeh is a library for interactive visualization. One can use it in Jupyter notebooks.
Here is the example.
Lets say we have a pandas dataframe with timestamps and some values:
1 2 3 4 5 6 7 8 9 10 import pandas as pd from io import StringIO df = pd.read_csv(StringIO("""timestamp,value 2018-01-01T10:00:00,20 2018-01-01T12:00:00,10 2018-01-01T14:00:00,30 2018-01-02T10:30:00,40 2018-01-02T13:00:00,50 2018-01-02T18:00:40,10 """), parse_dates=["timestamp"]) You can visualize it to a nice graph with zoom, selection, and mouse-over tooltips using the bokeh:...</p>
</section>
<footer class=entry-footer>June 20, 2018&nbsp;·&nbsp;SergeM</footer>
<a class=entry-link aria-label="post link to Bokeh in jupyter notebooks for interactive plots" href=https://serge-m.github.io/posts/bokeh-example/></a>
</article>
<article class=post-entry>
<header class=entry-header>
<h2>Comparison of click-based config parsers for python</h2>
</header>
<section class=entry-content>
<p>Problem There is click module that allows you to create comman dline interfaces for your python scripts. The advantages of click are
nice syntax 1 2 3 4 5 6 7 8 9 10 11 12 13 14 import click @click.command() @click.option('--count', default=1, help='Number of greetings.') @click.option('--name', prompt='Your name', help='The person to greet.') def hello(count, name): """Simple program that greets NAME for a total of COUNT times.""" for x in range(count): click....</p>
</section>
<footer class=entry-footer>June 6, 2018&nbsp;·&nbsp;SergeM</footer>
<a class=entry-link aria-label="post link to Comparison of click-based config parsers for python" href=https://serge-m.github.io/posts/click-config-parsers/></a>
</article>
<article class=post-entry>
<header class=entry-header>
<h2>Vim cheat sheet</h2>
</header>
<section class=entry-content>
<p>Some frequently used commands in Vim File explorer :Explore - opens the file explorer window. :E - the same Visual commands > - shift right &lt; - shift left y - yank (copy) marked text d - delete marked text ~ - switch case Cut and Paste yy - yank (copy) a line 2yy - yank 2 lines yw - yank word y$ - yank to end of line p - put (paste) the clipboard after cursor P - put (paste) before cursor dd - delete (cut) a line dw - delete (cut) the current word x - delete (cut) current character Search/Replace /pattern - search for pattern ?...</p>
</section>
<footer class=entry-footer>May 31, 2018&nbsp;·&nbsp;SergeM</footer>
<a class=entry-link aria-label="post link to Vim cheat sheet" href=https://serge-m.github.io/posts/vim/></a>
</article>
<article class=post-entry>
<header class=entry-header>
<h2>Select lines matching regular expression in python</h2>
</header>
<section class=entry-content>
<p>Given a text file we want to create another file containing only those lines that match a certain regular expression using python3
1 2 3 4 5 6 import re with open("./in.txt", "r") as input_file, open("out.txt", "w") as output_file: for line in input_file: if re.match("(.*)import(.*)", line): print(line, file=output_file) </p>
</section>
<footer class=entry-footer>February 26, 2018&nbsp;·&nbsp;SergeM</footer>
<a class=entry-link aria-label="post link to Select lines matching regular expression in python" href=https://serge-m.github.io/posts/print-lines-matching-regex/></a>
</article>
<article class=post-entry>
<header class=entry-header>
<h2>Workflow management with Apache Airflow</h2>
</header>
<section class=entry-content>
<p>Some useful resources about Airflow:
ETL best practices with Airflow
Series of articles about Airflow in production:
Part 1 - about usecases and alternatives Part 2 - about alternatives (Luigi and Paitball) Part 3 - key concepts Part 4 - deployment, issues More notes about production About start_time: Why isn’t my task getting scheduled?
One cannot specify datetime.now() as start_date. Instead one has to provide datetime object without timezone....</p>
</section>
<footer class=entry-footer>February 6, 2018&nbsp;·&nbsp;SergeM</footer>
<a class=entry-link aria-label="post link to Workflow management with Apache Airflow" href=https://serge-m.github.io/posts/airflow/></a>
</article>
<article class=post-entry>
<header class=entry-header>
<h2>Datetime in Python</h2>
</header>
<section class=entry-content>
<p>Conversion from calendar week to date Sometimes one has to convert a date written as year, calendar week (CW), and day of week to an actual date with month and date. The behaviour in the begin/end of a year may be not straightforward. For example according to ISO 8601 monday date of the CW 1 year 2019 is 31 January 2018. As far as I can see there is no standard function for conversion in python....</p>
</section>
<footer class=entry-footer>January 17, 2018&nbsp;·&nbsp;SergeM</footer>
<a class=entry-link aria-label="post link to Datetime in Python" href=https://serge-m.github.io/posts/datetime-in-python/></a>
</article>
<article class=post-entry>
<header class=entry-header>
<h2>Flask and SQLAlchemy explained</h2>
</header>
<section class=entry-content>
<p>Awesome explanation of SQLAlchemy with examples and comparison to Django by Armin Ronacher: SQLAlchemy and You
Flask-SQLAlchemy module Flask-SQLAlchemy is an extension for Flask that adds support for SQLAlchemy to your application.
How to add SQLAlchemy to Flask application:
from flask import Flask from flask_sqlalchemy import SQLAlchemy app = Flask(__name__) # configuration of the DB is read from flask configuration storage app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:////tmp/test.db' # here we define db object that keeps track of sql interactions db = SQLAlchemy(app) Now we are ready to define tables and objects using predefined db....</p>
</section>
<footer class=entry-footer>January 11, 2018&nbsp;·&nbsp;SergeM</footer>
<a class=entry-link aria-label="post link to Flask and SQLAlchemy explained" href=https://serge-m.github.io/posts/flask-and-sqlalchemy-explained/></a>
</article>
<article class=post-entry>
<header class=entry-header>
<h2>Ubuntu/linux settings</h2>
</header>
<section class=entry-content>
<p>Some settings I find useful for a workstation
CPU monitoring on the main panel Default Ubuntu desktop seems to become finally convenient enough for me starting from Ubuntu 18.04. Only several tweaks are missing. Constantly available CPU/Mem/HDD/Network monitor is one of them. Here is how to install a small widget for a top panel in the default GNOME desktop environment.
sudo apt-get install gir1.2-gtop-2.0 gir1.2-networkmanager-1.0 gir1.2-clutter-1.0
Go to Ubuntu Software and then search for system monitor extension....</p>
</section>
<footer class=entry-footer>January 11, 2018&nbsp;·&nbsp;SergeM</footer>
<a class=entry-link aria-label="post link to Ubuntu/linux settings" href=https://serge-m.github.io/posts/ubuntu-linux-settings/></a>
</article>
<article class=post-entry>
<header class=entry-header>
<h2>Pytest cheatsheet</h2>
</header>
<section class=entry-content>
<p>Pytest is a powerful tool for testing in python. Here are some notes about hands-on experience.
Running tests in pytest with/without a specified mark Execute
pytest -m "integration" if you want to run only tests that have “@pytest.mark.integration” annotation.
Similarly you can run only tests that don’t are not marked.
pytest -m "not your_mark" That command will test everything that is not marked as “your_mark”.
How to verify exception message using pytest One can use context manager pytest....</p>
</section>
<footer class=entry-footer>January 2, 2018&nbsp;·&nbsp;SergeM</footer>
<a class=entry-link aria-label="post link to Pytest cheatsheet" href=https://serge-m.github.io/posts/pytest-cheatsheet/></a>
</article>
<footer class=page-footer>
<nav class=pagination>
<a class=prev href=https://serge-m.github.io/posts/page/3/>« Prev Page</a>
<a class=next href=https://serge-m.github.io/posts/page/5/>Next Page »</a>
</nav>
</footer>
</main>
<footer class=footer>
<span>&copy; 2022 <a href=https://serge-m.github.io/>sergem's personal public notebook</a></span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)">
<button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</button>
</a>
<script>window.onload=function(){localStorage.getItem("menu-scroll-position")&&(document.getElementById('menu').scrollLeft=localStorage.getItem("menu-scroll-position"))};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById('menu').scrollLeft)}document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
</body>
</html>