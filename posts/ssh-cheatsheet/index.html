<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>SSH cheat sheet | sergem's personal public notebook</title><meta name=keywords content="ssh,keys,useful,tunnel,security,linux"><meta name=description content="Create more secure ssh keys Create a key using elliptic curve cryptography (more secure):
ssh-keygen -a 100 -t ed25519 generate RSA key of length 4096 to file my_key
ssh-keygen -t rsa -b 4096 -C &#34;your@e-mail.com&#34; -f my_key Generate md5 fingerprint of the key (works in newer ubuntu, 16):
ssh-keygen -lf ./my_key -E md5 see also: Upgrade Your SSH Key to Ed25519
How to prevent SSH from scanning all the keys in ."><meta name=author content="SergeM"><link rel=canonical href=https://serge-m.github.io/posts/ssh-cheatsheet/><link href=/assets/css/stylesheet.min.6d98a2276d0cb41ef459267b3ff3ef02df70a8f16b70bbc52b20568702bc90cf.css integrity="sha256-bZiiJ20MtB70WSZ7P/PvAt9wqPFrcLvFKyBWhwK8kM8=" rel="preload stylesheet" as=style><link rel=icon href=https://serge-m.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://serge-m.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://serge-m.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://serge-m.github.io/apple-touch-icon.png><link rel=mask-icon href=https://serge-m.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.113.0"><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-40853494-2","auto"),ga("send","pageview"))</script><meta property="og:title" content="SSH cheat sheet"><meta property="og:description" content="Create more secure ssh keys Create a key using elliptic curve cryptography (more secure):
ssh-keygen -a 100 -t ed25519 generate RSA key of length 4096 to file my_key
ssh-keygen -t rsa -b 4096 -C &#34;your@e-mail.com&#34; -f my_key Generate md5 fingerprint of the key (works in newer ubuntu, 16):
ssh-keygen -lf ./my_key -E md5 see also: Upgrade Your SSH Key to Ed25519
How to prevent SSH from scanning all the keys in ."><meta property="og:type" content="article"><meta property="og:url" content="https://serge-m.github.io/posts/ssh-cheatsheet/"><meta property="og:image" content="https://serge-m.github.io/papermod-cover.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-04-12T12:11:00+00:00"><meta property="article:modified_time" content="2017-04-12T12:11:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://serge-m.github.io/papermod-cover.png"><meta name=twitter:title content="SSH cheat sheet"><meta name=twitter:description content="Create more secure ssh keys Create a key using elliptic curve cryptography (more secure):
ssh-keygen -a 100 -t ed25519 generate RSA key of length 4096 to file my_key
ssh-keygen -t rsa -b 4096 -C &#34;your@e-mail.com&#34; -f my_key Generate md5 fingerprint of the key (works in newer ubuntu, 16):
ssh-keygen -lf ./my_key -E md5 see also: Upgrade Your SSH Key to Ed25519
How to prevent SSH from scanning all the keys in ."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://serge-m.github.io/posts/"},{"@type":"ListItem","position":2,"name":"SSH cheat sheet","item":"https://serge-m.github.io/posts/ssh-cheatsheet/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"SSH cheat sheet","name":"SSH cheat sheet","description":"Create more secure ssh keys Create a key using elliptic curve cryptography (more secure):\nssh-keygen -a 100 -t ed25519 generate RSA key of length 4096 to file my_key\nssh-keygen -t rsa -b 4096 -C \u0026quot;your@e-mail.com\u0026quot; -f my_key Generate md5 fingerprint of the key (works in newer ubuntu, 16):\nssh-keygen -lf ./my_key -E md5 see also: Upgrade Your SSH Key to Ed25519\nHow to prevent SSH from scanning all the keys in .","keywords":["ssh","keys","useful","tunnel","security","linux"],"articleBody":"Create more secure ssh keys Create a key using elliptic curve cryptography (more secure):\nssh-keygen -a 100 -t ed25519 generate RSA key of length 4096 to file my_key\nssh-keygen -t rsa -b 4096 -C \"your@e-mail.com\" -f my_key Generate md5 fingerprint of the key (works in newer ubuntu, 16):\nssh-keygen -lf ./my_key -E md5 see also: Upgrade Your SSH Key to Ed25519\nHow to prevent SSH from scanning all the keys in .ssh directory $ ssh -o IdentitiesOnly=yes -F /dev/null -i ~/path/to/some_id_rsa root@server.mydom.com The options are as follows:\n-o IdentitiesOnly=yes - tells SSH to only use keys that are provided via the CLI and none from the $HOME/.ssh or via ssh-agent -F /dev/null - disables the use of $HOME/.ssh/config -i ~/path/to/some_id_rsa - the key that you explicitly want to use for the connection Source\nNo strict server checking To disable confirmation about unknown server fingerprints add this to command line: -o StrictHostKeyChecking=no\nSet correct permissions for .ssh directory You may get and error while connecting to ssh if you have wrond permissions for .ssh directory on server for a given user.\nError message on client while ssh user-on-server@server:\ndebug1: Authentications that can continue: publickey debug1: Next authentication method: publickey debug1: Offering RSA public key: /home/user-on-client/.ssh/YOUR_KEY debug1: Authentications that can continue: publickey debug1: No more authentication methods to try. Permission denied (publickey). Error message on server:\nAug 11 10:55:21 comp sshd[3446]: Connection closed by 10.1.0.12 port 47794 [preauth] And nothing more in logs. The reason was that .ssh directory on the server had too strict permissions:\ndr-------- 2 user-on-server user-on-server 4096 Aug 11 10:54 .ssh/ Read only is not enough. It must be rwx:\nchmod 700 .ssh For authorized_keys file use the following premissions:\nchmod 644 ~/.ssh/authorized_keys Port forwarding Remote port forwarding Take all the connections to 0.0.0.0:8080 of the remote machine (example.com) and forward it to localhost:80 on the local machine:\nssh -R 0.0.0.0:8080:localhost:80 -N root@example.com The command above creates a general IPv4-only bind, which means that the port is accessible on all interfaces via IPv4.\nThis version binds to all interfaces individually:\nssh -R \\*:8080:localhost:80 -N root@example.com Another option:\nssh -R \"[::]:8080:localhost:80\" -N root@example.com The third version is probably technically equivalent to the first, but again it creates only a single bind to ::, which means that the port is accessible via IPv6 natively and via IPv4 through IPv4-mapped IPv6 addresses (doesn’t work on Windows, OpenBSD). (You need the quotes because [::] could be interpreted as a glob otherwise.)\nFull list of specifications for the remote forwarding.\n-R [bind_address:]port:host:hostport -R [bind_address:]port:local_socket -R remote_socket:host:hostport -R remote_socket:local_socket Specifies that connections to the given TCP port or Unix socket on the remote (server) host are to be forwarded to the given host and port, or Unix socket, on the local side.\nBy default, TCP listening sockets on the server will be bound to the loopback interface only. This may be overridden by specifying a bind_address. An empty bind_address, or the address ‘*’, indicates that the remote socket should listen on all interfaces. Specifying a remote bind_address will only succeed if the server’s GatewayPorts option is enabled (see sshd_config(5)).\nIf the port argument is ‘0’, the listen port will be dynamically allocated on the server and reported to the client at run time.\nWhen used together with -O forward the allocated port will be printed to the standard output.\nWhen bind_address is omitted (as in your example), the port is bound on the loopback interface only.\nNote that if you use OpenSSH sshd server, the server’s GatewayPorts option needs to be enabled (set to yes or clientspecified) for arbitrary interface to work (check file /etc/ssh/sshd_config on the server). Otherwise (default value for this option is no), the server will always force the port to be bound on the loopback interface only.\nSee also: 1, 2\nLocal port forwarding ssh -L localhost🔢localhost:5678 user@1.1.1.1 With this command\nall the connections to the localhost:1234 of the host machine are forwarded to localhost:5678 at the server (1.1.1.1). Port forwarding between two machines that don’t have external ip’s using a server On machine 1:\nssh -L localhost:10002:localhost:10001 user@1.1.1.1 On machine 2:\nssh -R localhost:10001:localhost:10000 user@1.1.1.1 Now when I access localhost:10002 on machine 1 the request is redirected to localhost:10000 of machine 2. The connection goes through port 10001 of host 1.1.1.1\nconfig for multiple port forwarding How to forward multiple ports with one command. It is possible with a config file.\nImagine we want to forward local ports 22, 9999, 9998 to the corresponding ports of machine 192.168.1.2 using ssh on machine 192.168.1.1. In order to do that add the following to ~/.ssh/config:\nHost all-port-forwards Hostname 192.168.1.1 User user LocalForward 22 192.168.1.2:22 LocalForward 9999 192.168.1.2:9999 LocalForward 9998 192.168.1.2:9998 Now you can run a single command:\nssh all-port-forwards Port forwarding on system startup with retry We want our port to be forwarded on the startup of the system. Also we want to deal with failures: retry on disconnect etc.\nInitial version - it doesn’t work In my experience the approach didn’t really work. The built-in mechanisms of systemctl didn’t allow me to achieve robust restarting.\nCreate a file /etc/systemd/system/tunnelssh.service:\n[Unit] Description=tunnel ssh to server [Service] User=YOUR_LOCAL_USER ExecStart=/usr/bin/ssh -NT -o ServerAliveInterval=60 -o ExitOnForwardFailure=yes -i PATH_TO_YOUR_PRIVATE_KEY -R REMOTE_SERVER_INTERFACE:PORT_ON_REMOTE_SERVER:localhost:LOCAL_PORT user_at_remote_server@REMOTE_SERVER StartLimitIntervalSec=10 StartLimitBurst=1 RestartSec=3 Restart=Always [Install] WantedBy=multi-user.target Then enable and start\nsystemctl enable tunnelssh.service systemctl start tunnelssh.service systemctl status tunnelssh.service Unfortunately it doesn’t work on startup. It says that the unit entered failed state and doesn’t restart. The problem is that\nour service may start before network connection is up. You may add After=network.target or After=network-online.target as suggested here but it doesn’t save you from the next issue. our server can be down for some time retry mechanism of systemd is somehow broken. I couldn’t make it work with configuration of burst intervals from here, here and here. And it seems I am not the only one. (in the spirit of this solution)\nSecond version So we have to implement retry on our own without systemd. Fortunately there is a tool autossh. See for example [1] or [2]\n[Unit] Description=tunnel ssh to server # After=network.target network-online.target multi-user.target # Requires=network-online.target [Service] User=YOUR_LOCAL_USER Environment=AUTOSSH_GATETIME=0 ExecStart=/usr/bin/autossh -M 0 -NT -o ServerAliveInterval=60 -o ExitOnForwardFailure=yes -i PATH_TO_YOUR_PRIVATE_KEY -R REMOTE_SERVER_INTERFACE:PORT_ON_REMOTE_SERVER:localhost:LOCAL_PORT user_at_remote_server@REMOTE_SERVER RestartSec=5 Restart=Always [Install] WantedBy=multi-user.target Configuring SSH server Enable only ssh v2:\nProtocol 2 Disable password authentication. Replace corresponding values in /etc/ssh/sshd_config:\nChallengeResponseAuthentication no PasswordAuthentication no source\nRestrict SSH access to only user accounts that should have it. For example, you may create a group called “sshlogin” and add the group name as the value associated with the AllowGroups variable located in the file /etc/ssh/sshd_config.\nAllowGroups sshlogin Then add your permitted SSH users to the group “sshlogin”, and restart the SSH service.\nsudo adduser username sshlogin sudo systemctl restart sshd.service source\nRestarting ssh service after each change in sshd_config you have to restart ssh service to enable the changes\n1 2 3 4 5 6 7 8 9 ## Ubuntu/debian user ## sudo service ssh restart # only for systemd based Ubuntu/Debian 8.x+ users # sudo systemctl restart ssh #### RHEL/CentOS/Fedora Linux user type #### sudo service sshd restart # only for systemd based RHEL/CentOS v7+ users # sudo systemctl restart sshd Add user for ssh tunnel only useradd sshtunnel -m -d /home/sshtunnel -s /bin/rbash passwd sshtunnel in .profile in the home directory of the user (in our example it is /home/sshtunnel/):\nPATH=\"\" Forbid changes:\nchmod 555 /home/sshtunnel/ cd /home/sshtunnel/ chmod 444 .bash_logout .bashrc .profile source\nRestrictions in sshd config:\nMatch User that-restricted-guy AllowTcpForwarding yes X11Forwarding no AllowAgentForwarding no ForceCommand /bin/false source\nRestricting root user For security reason you should always block access to root user and group on a Linux or Unix-like systems.\nFirst, make sure at least one user is allowed to use ‘su -‘ or ‘sudo’ command on the server.\nThen add to /etc/ssh/sshd_config\nDenyUsers root DenyGroups root set PermitRootLogin to no:\nPermitRootLogin no Save the file and restart the ssh service.\nHow To Configure SSH Key-Based Authentication on a Linux Server See How To Configure SSH Key-Based Authentication on a Linux Server. Should I put public or private key to the server?\nUse ssh authentication by key instead of password Setup the SSH server to use keys for authentication\nHow to load ssh key without placing it to ~/.ssh You must load a key to the ssh agent running in the background.\nTo start the ssh-agent in the background:\n1 2 eval \"$(ssh-agent -s)\" Agent pid 59566 You can add your SSH private key to the ssh-agent using ssh-add and full path to the key:\n1 ssh-add ~/path_to_your_private_key/id_rsa Now you can for example do git clone from github using ssh key.\nsee also 1\nmount remote file system using ssh sudo apt-get install sshfs sudo mkdir /mnt/droplet sudo sshfs -o allow_other,IdentityFile=~/.ssh/id_rsa root@xxx.xxx.xxx.xxx:/ /mnt/droplet With identity files only:\nsudo sshfs -o allow_other,IdentitiesOnly=yes,IdentityFile=~/.ssh/id_rsa user@192.168.0.1:/remote/path /mnt/local/path/ Source\nSpecific settings for a website I have a private key with a custom name in ~/.ssh/ add the .pub is uploaded to github. When I try to clone my repo, git returns\nCloning into 'repo'... Permission denied (publickey). fatal: Could not read from remote repository. Please make sure you have the correct access rights and the repository exists. Probably git reads only keys with standard names (e.g. id_rsa). To make it pick up your custome key you can create a config file ~/.ssh/config:\nHost github.com IdentityFile ~/.ssh/your_custom_private_key IdentitiesOnly yes More here\nSee also Top 20 OpenSSH Server Best Security Practices SOCKS proxy How to run socks proxy. It’s a bit easier than using VPN because it doesn’t require sudo to launch. Also it doesn’t require to install anything on the server except openssh server.\nssh -D 1337 -q -C -N user@your_server.ip -D defines the port on the local machine,\n-q is quiet mode,\n-C compresses,\n-N causes remote commands not to be executed, just straight port forwarding.\nThen one can set up a socks proxy in the settings of the browser.\nsrc\nFaster retry after disconnecting In order to make recovery faster after network issues use options -o \"ServerAliveInterval 2\" -o \"ServerAliveCountMax 2\".\nAlternatively one can add the following to ~/.ssh/config:\nHost * ServerAliveInterval 2 ServerAliveCountMax 2 See also sshd_config - SSH Server Configuration - nice guidelines ","wordCount":"1695","inLanguage":"en","datePublished":"2017-04-12T12:11:00Z","dateModified":"2017-04-12T12:11:00Z","author":{"@type":"Person","name":"SergeM"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://serge-m.github.io/posts/ssh-cheatsheet/"},"publisher":{"@type":"Organization","name":"sergem's personal public notebook","logo":{"@type":"ImageObject","url":"https://serge-m.github.io/favicon.ico"}}}</script></head><body id=top><script>window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://serge-m.github.io/ accesskey=h title="Home (Alt + H)">Home</a>
<span class=logo-switches></span></div><ul id=menu onscroll=menu_on_scroll()><li><a href=https://serge-m.github.io/archives title=Archive><span>Archive</span></a></li><li><a href=https://serge-m.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://serge-m.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://serge-m.github.io/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://serge-m.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://serge-m.github.io/posts/>Posts</a></div><h1 class=post-title>SSH cheat sheet</h1><div class=post-meta>April 12, 2017&nbsp;·&nbsp;SergeM</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><div class=details>Table of Contents</div></summary><div class=inner><ul><li><a href=#create-more-secure-ssh-keys aria-label="Create more secure ssh keys">Create more secure ssh keys</a></li><li><a href=#how-to-prevent-ssh-from-scanning-all-the-keys-in-ssh-directory aria-label="How to prevent SSH from scanning all the keys in .ssh directory">How to prevent SSH from scanning all the keys in .ssh directory</a></li><li><a href=#no-strict-server-checking aria-label="No strict server checking">No strict server checking</a></li><li><a href=#set-correct-permissions-for-ssh-directory aria-label="Set correct permissions for .ssh directory">Set correct permissions for .ssh directory</a></li><li><a href=#port-forwarding aria-label="Port forwarding">Port forwarding</a><ul><li><a href=#remote-port-forwarding aria-label="Remote port forwarding">Remote port forwarding</a><ul><li><a href=#local-port-forwarding aria-label="Local port forwarding">Local port forwarding</a></li><li><a href=#port-forwarding-between-two-machines-that-dont-have-external-ips-using-a-server aria-label="Port forwarding between two machines that don&amp;rsquo;t have external ip&amp;rsquo;s using a server">Port forwarding between two machines that don&rsquo;t have external ip&rsquo;s using a server</a></li><li><a href=#config-for-multiple-port-forwarding aria-label="config for multiple port forwarding">config for multiple port forwarding</a></li></ul></li><li><a href=#port-forwarding-on-system-startup-with-retry aria-label="Port forwarding on system startup with retry">Port forwarding on system startup with retry</a><ul><li><a href=#initial-version---it-doesnt-work aria-label="Initial version - it doesn&amp;rsquo;t work">Initial version - it doesn&rsquo;t work</a></li><li><a href=#second-version aria-label="Second version">Second version</a></li></ul></li></ul></li><li><a href=#configuring-ssh-server aria-label="Configuring SSH server">Configuring SSH server</a><ul><li><a href=#restarting-ssh-service aria-label="Restarting ssh service">Restarting ssh service</a></li><li><a href=#add-user-for-ssh-tunnel-only aria-label="Add user for ssh tunnel only">Add user for ssh tunnel only</a></li><li><a href=#restricting-root-user aria-label="Restricting root user">Restricting root user</a></li><li><a href=#how-to-configure-ssh-key-based-authentication-on-a-linux-server aria-label="How To Configure SSH Key-Based Authentication on a Linux Server">How To Configure SSH Key-Based Authentication on a Linux Server</a></li><li><a href=#use-ssh-authentication-by-key-instead-of-password aria-label="Use ssh authentication by key instead of password">Use ssh authentication by key instead of password</a></li></ul></li><li><a href=#how-to-load-ssh-key-without-placing-it-to-ssh aria-label="How to load ssh key without placing it to ~/.ssh">How to load ssh key without placing it to ~/.ssh</a></li><li><a href=#mount-remote-file-system-using-ssh aria-label="mount remote file system using ssh">mount remote file system using ssh</a></li><li><a href=#specific-settings-for-a-website aria-label="Specific settings for a website">Specific settings for a website</a><ul><li><a href=#see-also aria-label="See also">See also</a></li></ul></li><li><a href=#socks-proxy aria-label="SOCKS proxy">SOCKS proxy</a></li><li><a href=#faster-retry-after-disconnecting aria-label="Faster retry after disconnecting">Faster retry after disconnecting</a></li><li><a href=#see-also-1 aria-label="See also">See also</a></li></ul></div></details></div><div class=post-content><h2 id=create-more-secure-ssh-keys>Create more secure ssh keys<a hidden class=anchor aria-hidden=true href=#create-more-secure-ssh-keys>#</a></h2><p>Create a key using elliptic curve cryptography (more secure):</p><pre><code>ssh-keygen -a 100 -t ed25519
</code></pre><p>generate RSA key of length 4096 to file <code>my_key</code></p><pre><code>ssh-keygen -t rsa -b 4096 -C &quot;your@e-mail.com&quot; -f my_key
</code></pre><p>Generate md5 fingerprint of the key (works in newer ubuntu, 16):</p><pre><code>ssh-keygen -lf ./my_key -E md5
</code></pre><p>see also: <a href=https://medium.com/risan/upgrade-your-ssh-key-to-ed25519-c6e8d60d3c54>Upgrade Your SSH Key to Ed25519</a></p><h2 id=how-to-prevent-ssh-from-scanning-all-the-keys-in-ssh-directory>How to prevent SSH from scanning all the keys in .ssh directory<a hidden class=anchor aria-hidden=true href=#how-to-prevent-ssh-from-scanning-all-the-keys-in-ssh-directory>#</a></h2><pre><code>$ ssh -o IdentitiesOnly=yes -F /dev/null -i ~/path/to/some_id_rsa root@server.mydom.com
</code></pre><p>The options are as follows:</p><ul><li><code>-o IdentitiesOnly=yes</code> - tells SSH to only use keys that are provided via the CLI and none from the <code>$HOME/.ssh</code> or via ssh-agent</li><li><code>-F /dev/null</code> - disables the use of <code>$HOME/.ssh/config</code></li><li><code>-i ~/path/to/some_id_rsa</code> - the key that you explicitly want to use for the connection</li></ul><p><a href=https://superuser.com/a/1010861>Source</a></p><h2 id=no-strict-server-checking>No strict server checking<a hidden class=anchor aria-hidden=true href=#no-strict-server-checking>#</a></h2><p>To disable confirmation about unknown server fingerprints add this to command line:
<code>-o StrictHostKeyChecking=no</code></p><h2 id=set-correct-permissions-for-ssh-directory>Set correct permissions for .ssh directory<a hidden class=anchor aria-hidden=true href=#set-correct-permissions-for-ssh-directory>#</a></h2><p>You may get and error while connecting to ssh if you have wrond permissions for .ssh directory on server for a given user.</p><p>Error message on client while <code>ssh user-on-server@server</code>:</p><pre tabindex=0><code>debug1: Authentications that can continue: publickey
debug1: Next authentication method: publickey
debug1: Offering RSA public key: /home/user-on-client/.ssh/YOUR_KEY
debug1: Authentications that can continue: publickey
debug1: No more authentication methods to try.
Permission denied (publickey).
</code></pre><p>Error message on server:</p><pre tabindex=0><code>Aug 11 10:55:21 comp sshd[3446]: Connection closed by 10.1.0.12 port 47794 [preauth]
</code></pre><p>And nothing more in logs.
The reason was that <code>.ssh</code> directory on the server had too strict permissions:</p><pre tabindex=0><code>dr-------- 2 user-on-server user-on-server 4096 Aug 11 10:54 .ssh/
</code></pre><p>Read only is not enough. It must be <code>rwx</code>:</p><pre tabindex=0><code>chmod 700 .ssh
</code></pre><p>For authorized_keys file use the following premissions:</p><pre tabindex=0><code>chmod 644 ~/.ssh/authorized_keys 
</code></pre><h2 id=port-forwarding>Port forwarding<a hidden class=anchor aria-hidden=true href=#port-forwarding>#</a></h2><h3 id=remote-port-forwarding>Remote port forwarding<a hidden class=anchor aria-hidden=true href=#remote-port-forwarding>#</a></h3><p>Take all the connections to <code>0.0.0.0:8080</code> of the remote machine (<code>example.com</code>)
and forward it to <code>localhost:80</code> on the local machine:</p><pre><code>ssh -R 0.0.0.0:8080:localhost:80 -N root@example.com
</code></pre><p>The command above creates a general IPv4-only bind,
which means that the port is accessible on <strong>all</strong> interfaces via IPv4.</p><p>This version binds to all interfaces individually:</p><pre><code>ssh -R \*:8080:localhost:80 -N root@example.com
</code></pre><p>Another option:</p><pre><code>ssh -R &quot;[::]:8080:localhost:80&quot; -N root@example.com
</code></pre><p>The third version is probably technically equivalent to the first,
but again it creates only a single bind to <code>::</code>, which means that the port is accessible via IPv6
natively and via IPv4 through IPv4-mapped IPv6 addresses (doesn&rsquo;t work on Windows, OpenBSD).
(You need the quotes because <code>[::]</code> could be interpreted as a glob otherwise.)</p><p>Full list of specifications for the remote forwarding.</p><pre tabindex=0><code>     -R [bind_address:]port:host:hostport
     -R [bind_address:]port:local_socket
     -R remote_socket:host:hostport
     -R remote_socket:local_socket
</code></pre><p>Specifies that connections to the given TCP port or Unix socket on the remote (server)
host are to be forwarded to the given host and port, or Unix socket, on the local side.</p><p>By default, TCP listening sockets on the server will be bound to the loopback interface only. This may be overridden by specifying a bind_address. An empty bind_address, or the address ‘*’, indicates that the remote socket should listen on all interfaces. Specifying a remote bind_address will only succeed if the server&rsquo;s <code>GatewayPorts</code> option is enabled (see sshd_config(5)).</p><p>If the port argument is ‘0’, the listen port will be dynamically allocated on the server
and reported to the client at run time.<br>When used together with <code>-O</code> forward the allocated port will be printed to the standard output.</p><p>When bind_address is omitted (as in your example), the port is bound on the loopback interface only.</p><p>Note that if you use OpenSSH sshd server, the server&rsquo;s <code>GatewayPorts</code>
option needs to be enabled (set to <code>yes</code> or <code>clientspecified</code>) for arbitrary interface to work
(check file <code>/etc/ssh/sshd_config</code> on the <strong>server</strong>).
Otherwise (default value for this option is <code>no</code>),
the server will always force the port to be bound on the loopback interface only.</p><p>See also: <a href=https://superuser.com/a/591963>1</a>, <a href=https://man.openbsd.org/ssh>2</a></p><h4 id=local-port-forwarding>Local port forwarding<a hidden class=anchor aria-hidden=true href=#local-port-forwarding>#</a></h4><pre><code>ssh -L localhost🔢localhost:5678 user@1.1.1.1
</code></pre><p>With this command</p><ul><li>all the connections to the <code>localhost:1234</code> of the host machine</li><li>are forwarded to <code>localhost:5678</code> at the server (<code>1.1.1.1</code>).</li></ul><h4 id=port-forwarding-between-two-machines-that-dont-have-external-ips-using-a-server>Port forwarding between two machines that don&rsquo;t have external ip&rsquo;s using a server<a hidden class=anchor aria-hidden=true href=#port-forwarding-between-two-machines-that-dont-have-external-ips-using-a-server>#</a></h4><p>On machine 1:</p><pre><code>ssh -L localhost:10002:localhost:10001 user@1.1.1.1
</code></pre><p>On machine 2:</p><pre><code>ssh -R localhost:10001:localhost:10000 user@1.1.1.1
</code></pre><p>Now when I access <code>localhost:10002</code> on machine 1 the request is redirected to <code>localhost:10000</code> of machine 2.
The connection goes through port <code>10001</code> of host <code>1.1.1.1</code></p><h4 id=config-for-multiple-port-forwarding>config for multiple port forwarding<a hidden class=anchor aria-hidden=true href=#config-for-multiple-port-forwarding>#</a></h4><p>How to forward multiple ports with one command. It is possible with a config file.</p><p>Imagine we want to forward local ports 22, 9999, 9998 to the corresponding ports of machine <code>192.168.1.2</code> using ssh on machine <code>192.168.1.1</code>.
In order to do that add the following to <code>~/.ssh/config</code>:</p><pre><code>Host all-port-forwards
  Hostname 192.168.1.1
  User user
  LocalForward 22 192.168.1.2:22
  LocalForward 9999 192.168.1.2:9999
  LocalForward 9998 192.168.1.2:9998
</code></pre><p>Now you can run a single command:</p><pre><code>ssh all-port-forwards
</code></pre><h3 id=port-forwarding-on-system-startup-with-retry>Port forwarding on system startup with retry<a hidden class=anchor aria-hidden=true href=#port-forwarding-on-system-startup-with-retry>#</a></h3><p>We want our port to be forwarded on the startup of the system. Also we want to deal with failures: retry on disconnect etc.</p><h4 id=initial-version---it-doesnt-work>Initial version - it doesn&rsquo;t work<a hidden class=anchor aria-hidden=true href=#initial-version---it-doesnt-work>#</a></h4><p>In my experience the approach didn&rsquo;t really work. The built-in mechanisms of systemctl didn&rsquo;t allow me to achieve robust restarting.</p><p>Create a file <code>/etc/systemd/system/tunnelssh.service</code>:</p><pre tabindex=0><code>[Unit]
Description=tunnel ssh to server

[Service]
User=YOUR_LOCAL_USER
ExecStart=/usr/bin/ssh -NT -o ServerAliveInterval=60 -o ExitOnForwardFailure=yes -i PATH_TO_YOUR_PRIVATE_KEY -R REMOTE_SERVER_INTERFACE:PORT_ON_REMOTE_SERVER:localhost:LOCAL_PORT user_at_remote_server@REMOTE_SERVER

StartLimitIntervalSec=10
StartLimitBurst=1
RestartSec=3
Restart=Always

[Install]
WantedBy=multi-user.target
</code></pre><p>Then enable and start</p><pre tabindex=0><code>systemctl enable tunnelssh.service
systemctl start tunnelssh.service
systemctl status tunnelssh.service
</code></pre><p>Unfortunately it doesn&rsquo;t work on startup. It says that the unit entered failed state and doesn&rsquo;t restart.
The problem is that</p><ol><li>our service may start before network connection is up. You may add <code>After=network.target</code> or <code>After=network-online.target</code> as suggested <a href=https://gist.github.com/drmalex07/c0f9304deea566842490#gistcomment-2087688>here</a> but it doesn&rsquo;t save you from the next issue.</li><li>our server can be down for some time</li><li>retry mechanism of systemd is somehow broken. I couldn&rsquo;t make it work with configuration of burst intervals from <a href=https://selivan.github.io/2017/12/30/systemd-serice-always-restart.html>here</a>, <a href=https://serverfault.com/questions/736624/systemd-service-automatic-restart-after-startlimitinterval>here</a> and <a href=https://unix.stackexchange.com/a/289756>here</a>. And it <a href=https://github.com/google/cloud-print-connector/issues/140>seems</a> I am not the only <a href=https://unix.stackexchange.com/a/216254>one</a>.</li></ol><p>(in the spirit of this <a href=https://gist.github.com/drmalex07/c0f9304deea566842490>solution</a>)</p><h4 id=second-version>Second version<a hidden class=anchor aria-hidden=true href=#second-version>#</a></h4><p>So we have to implement retry on our own without systemd. Fortunately there is a tool <code>autossh</code>. See for example <a href=https://www.everythingcli.org/ssh-tunnelling-for-fun-and-profit-autossh/>[1]</a> or <a href=https://www.everythingcli.org/ssh-tunnelling-for-fun-and-profit-autossh/>[2]</a></p><pre><code>[Unit]
Description=tunnel ssh to server
# After=network.target network-online.target multi-user.target
# Requires=network-online.target

[Service]
User=YOUR_LOCAL_USER
Environment=AUTOSSH_GATETIME=0
ExecStart=/usr/bin/autossh -M 0 -NT -o ServerAliveInterval=60 -o ExitOnForwardFailure=yes -i PATH_TO_YOUR_PRIVATE_KEY -R REMOTE_SERVER_INTERFACE:PORT_ON_REMOTE_SERVER:localhost:LOCAL_PORT user_at_remote_server@REMOTE_SERVER

RestartSec=5
Restart=Always

[Install]
WantedBy=multi-user.target
</code></pre><h2 id=configuring-ssh-server>Configuring SSH server<a hidden class=anchor aria-hidden=true href=#configuring-ssh-server>#</a></h2><p>Enable only ssh v2:</p><pre tabindex=0><code>Protocol 2
</code></pre><p>Disable password authentication. Replace corresponding values in <code>/etc/ssh/sshd_config</code>:</p><pre tabindex=0><code>ChallengeResponseAuthentication no
PasswordAuthentication no
</code></pre><p><a href=https://support.hostgator.com/articles/how-to-disable-password-authentication-for-ssh>source</a></p><p>Restrict SSH access to only user accounts that should have it. For example, you may create a group called &ldquo;sshlogin&rdquo; and add the group name as the value associated with the <code>AllowGroups</code> variable located in the file <code>/etc/ssh/sshd_config</code>.</p><pre tabindex=0><code>AllowGroups sshlogin
</code></pre><p>Then add your permitted SSH users to the group &ldquo;sshlogin&rdquo;, and restart the SSH service.</p><pre tabindex=0><code>sudo adduser username sshlogin
sudo systemctl restart sshd.service
</code></pre><p><a href=https://help.ubuntu.com/lts/serverguide/user-management.html.en#other-security-considerations>source</a></p><h3 id=restarting-ssh-service>Restarting ssh service<a hidden class=anchor aria-hidden=true href=#restarting-ssh-service>#</a></h3><p>after each change in sshd_config you have to restart ssh service to enable the changes</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1>## Ubuntu/debian user ##</span>
</span></span><span class=line><span class=cl>sudo service ssh restart
</span></span><span class=line><span class=cl><span class=c1># only for systemd based Ubuntu/Debian 8.x+ users #</span>
</span></span><span class=line><span class=cl>sudo systemctl restart ssh
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl><span class=c1>#### RHEL/CentOS/Fedora Linux user type ####</span>
</span></span><span class=line><span class=cl>sudo service sshd restart
</span></span><span class=line><span class=cl><span class=c1># only for systemd based RHEL/CentOS v7+ users #</span>
</span></span><span class=line><span class=cl>sudo systemctl restart sshd
</span></span></code></pre></td></tr></table></div></div><h3 id=add-user-for-ssh-tunnel-only>Add user for ssh tunnel only<a hidden class=anchor aria-hidden=true href=#add-user-for-ssh-tunnel-only>#</a></h3><pre><code>useradd sshtunnel -m -d /home/sshtunnel -s /bin/rbash
passwd sshtunnel
</code></pre><p>in <code>.profile</code> in the home directory of the user (in our example it is /home/sshtunnel/):</p><pre><code>PATH=&quot;&quot;
</code></pre><p>Forbid changes:</p><pre><code>chmod 555 /home/sshtunnel/
cd /home/sshtunnel/
chmod 444 .bash_logout .bashrc .profile
</code></pre><p><a href=http://www.ab-weblog.com/en/creating-a-restricted-ssh-user-for-ssh-tunneling-only/>source</a></p><p>Restrictions in sshd config:</p><pre><code>Match User that-restricted-guy
  AllowTcpForwarding yes
  X11Forwarding no
  AllowAgentForwarding no
  ForceCommand /bin/false
</code></pre><p><a href=https://unix.stackexchange.com/a/337445>source</a></p><h3 id=restricting-root-user>Restricting root user<a hidden class=anchor aria-hidden=true href=#restricting-root-user>#</a></h3><p>For security reason you should always block access to root user and group on a Linux or Unix-like systems.</p><p>First, make sure at least one user is allowed to use ‘su -‘ or ‘sudo’ command on the server.</p><p>Then add to <code>/etc/ssh/sshd_config</code></p><pre tabindex=0><code>DenyUsers root
DenyGroups root
</code></pre><p>set PermitRootLogin to <code>no</code>:</p><pre tabindex=0><code>PermitRootLogin no
</code></pre><p>Save the file and restart the ssh service.</p><h3 id=how-to-configure-ssh-key-based-authentication-on-a-linux-server>How To Configure SSH Key-Based Authentication on a Linux Server<a hidden class=anchor aria-hidden=true href=#how-to-configure-ssh-key-based-authentication-on-a-linux-server>#</a></h3><p>See <a href=https://www.digitalocean.com/community/tutorials/how-to-configure-ssh-key-based-authentication-on-a-linux-server>How To Configure SSH Key-Based Authentication on a Linux Server</a>. Should I put public or private key to the server?</p><h3 id=use-ssh-authentication-by-key-instead-of-password>Use ssh authentication by key instead of password<a hidden class=anchor aria-hidden=true href=#use-ssh-authentication-by-key-instead-of-password>#</a></h3><p><a href=https://www.g-loaded.eu/2005/11/10/ssh-with-keys/>Setup the SSH server to use keys for authentication</a></p><h2 id=how-to-load-ssh-key-without-placing-it-to-ssh>How to load ssh key without placing it to ~/.ssh<a hidden class=anchor aria-hidden=true href=#how-to-load-ssh-key-without-placing-it-to-ssh>#</a></h2><p>You must load a key to the ssh agent running in the background.</p><p>To start the ssh-agent in the background:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>eval</span> <span class=s2>&#34;</span><span class=k>$(</span>ssh-agent -s<span class=k>)</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>Agent pid <span class=m>59566</span>
</span></span></code></pre></td></tr></table></div></div><p>You can add your SSH private key to the ssh-agent using <code>ssh-add</code> and full path to the key:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>    ssh-add ~/path_to_your_private_key/id_rsa
</span></span></code></pre></td></tr></table></div></div><p>Now you can for example do <code>git clone</code> from github using ssh key.</p><p>see also <a href=https://help.github.com/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent/#adding-your-ssh-key-to-the-ssh-agent>1</a></p><h2 id=mount-remote-file-system-using-ssh>mount remote file system using ssh<a hidden class=anchor aria-hidden=true href=#mount-remote-file-system-using-ssh>#</a></h2><pre tabindex=0><code>sudo apt-get install sshfs
sudo mkdir /mnt/droplet
sudo sshfs -o allow_other,IdentityFile=~/.ssh/id_rsa root@xxx.xxx.xxx.xxx:/ /mnt/droplet
</code></pre><p>With identity files only:</p><pre tabindex=0><code>sudo sshfs -o allow_other,IdentitiesOnly=yes,IdentityFile=~/.ssh/id_rsa user@192.168.0.1:/remote/path /mnt/local/path/
</code></pre><p><a href=https://www.digitalocean.com/community/tutorials/how-to-use-sshfs-to-mount-remote-file-systems-over-ssh>Source</a></p><h2 id=specific-settings-for-a-website>Specific settings for a website<a hidden class=anchor aria-hidden=true href=#specific-settings-for-a-website>#</a></h2><p>I have a private key with a custom name in <code>~/.ssh/</code> add the .pub is uploaded to github. When I try to clone my repo, git returns</p><pre tabindex=0><code>Cloning into &#39;repo&#39;...
Permission denied (publickey).
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.
</code></pre><p>Probably git reads only keys with standard names (e.g. id_rsa).
To make it pick up your custome key you can create a config file
<code>~/.ssh/config</code>:</p><pre tabindex=0><code>Host github.com
  IdentityFile ~/.ssh/your_custom_private_key
  IdentitiesOnly yes
</code></pre><p>More <a href=https://stackoverflow.com/questions/4565700/how-to-specify-the-private-ssh-key-to-use-when-executing-shell-command-on-git/11251797#11251797>here</a></p><h3 id=see-also>See also<a hidden class=anchor aria-hidden=true href=#see-also>#</a></h3><ul><li><a href=https://www.cyberciti.biz/tips/linux-unix-bsd-openssh-server-best-practices.html>Top 20 OpenSSH Server Best Security Practices</a></li></ul><h2 id=socks-proxy>SOCKS proxy<a hidden class=anchor aria-hidden=true href=#socks-proxy>#</a></h2><p>How to run socks proxy. It&rsquo;s a bit easier than using VPN because it doesn&rsquo;t require sudo to launch.
Also it doesn&rsquo;t require to install anything on the server except openssh server.</p><pre><code>ssh -D 1337 -q -C -N user@your_server.ip
</code></pre><p><code>-D</code> defines the port on the local machine,</p><p><code>-q</code> is quiet mode,</p><p><code>-C</code> compresses,</p><p><code>-N</code> causes remote commands not to be executed, just straight port forwarding.</p><p>Then one can set up a socks proxy in the settings of the browser.</p><p><a href=https://medium.com/@therockspush/building-a-quick-and-easy-ssh-socks-proxy-3a440f5d35a7>src</a></p><h2 id=faster-retry-after-disconnecting>Faster retry after disconnecting<a hidden class=anchor aria-hidden=true href=#faster-retry-after-disconnecting>#</a></h2><p>In order to make recovery faster after network issues use options
<code>-o "ServerAliveInterval 2" -o "ServerAliveCountMax 2"</code>.</p><p>Alternatively one can add the following to <code>~/.ssh/config</code>:</p><pre><code>Host *
  ServerAliveInterval 2
  ServerAliveCountMax 2
</code></pre><h2 id=see-also-1>See also<a hidden class=anchor aria-hidden=true href=#see-also-1>#</a></h2><ul><li><a href=https://www.ssh.com/ssh/sshd_config/>sshd_config - SSH Server Configuration</a> - nice guidelines</li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://serge-m.github.io/tags/ssh/>ssh</a></li><li><a href=https://serge-m.github.io/tags/keys/>keys</a></li><li><a href=https://serge-m.github.io/tags/useful/>useful</a></li><li><a href=https://serge-m.github.io/tags/tunnel/>tunnel</a></li><li><a href=https://serge-m.github.io/tags/security/>security</a></li><li><a href=https://serge-m.github.io/tags/linux/>linux</a></li></ul><nav class=paginav><a class=prev href=https://serge-m.github.io/posts/how-to-hide-firefox-title-bar-in-cinnamon-without-extension/><span class=title>« Prev Page</span><br><span>How to hide Firefox title bar in Cinnamon (mint)</span></a>
<a class=next href=https://serge-m.github.io/posts/convert-ovpn-to-ca-cert-key/><span class=title>Next Page »</span><br><span>Convert ovpn config file to .ca, .crt, .key</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share SSH cheat sheet on twitter" href="https://twitter.com/intent/tweet/?text=SSH%20cheat%20sheet&amp;url=https%3a%2f%2fserge-m.github.io%2fposts%2fssh-cheatsheet%2f&amp;hashtags=ssh%2ckeys%2cuseful%2ctunnel%2csecurity%2clinux"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share SSH cheat sheet on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fserge-m.github.io%2fposts%2fssh-cheatsheet%2f&amp;title=SSH%20cheat%20sheet&amp;summary=SSH%20cheat%20sheet&amp;source=https%3a%2f%2fserge-m.github.io%2fposts%2fssh-cheatsheet%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share SSH cheat sheet on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fserge-m.github.io%2fposts%2fssh-cheatsheet%2f&title=SSH%20cheat%20sheet"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share SSH cheat sheet on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fserge-m.github.io%2fposts%2fssh-cheatsheet%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share SSH cheat sheet on whatsapp" href="https://api.whatsapp.com/send?text=SSH%20cheat%20sheet%20-%20https%3a%2f%2fserge-m.github.io%2fposts%2fssh-cheatsheet%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share SSH cheat sheet on telegram" href="https://telegram.me/share/url?text=SSH%20cheat%20sheet&amp;url=https%3a%2f%2fserge-m.github.io%2fposts%2fssh-cheatsheet%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://serge-m.github.io/>sergem's personal public notebook</a></span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script defer src=/assets/js/highlight.min.b95bacdc39e37a332a9f883b1e78be4abc1fdca2bc1f2641f55e3cd3dabd4d61.js integrity="sha256-uVus3DnjejMqn4g7Hni+Srwf3KK8HyZB9V4809q9TWE=" onload=hljs.initHighlightingOnLoad()></script>
<script>window.onload=function(){localStorage.getItem("menu-scroll-position")&&(document.getElementById("menu").scrollLeft=localStorage.getItem("menu-scroll-position"))};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById("menu").scrollLeft)}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script></body></html>