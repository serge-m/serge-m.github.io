<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# fb: https://www.facebook.com/2008/fbml">
<head>
    <title>Spark in Docker with AWS credentials - sergem personal public notebook</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">



<link rel="canonical" href="https://serge-m.github.io/spark-in-docker-with-aws-credentials.html">

        <meta name="author" content="SergeM" />
        <meta name="keywords" content="spark,python,aws" />
        <meta name="description" content="Running spark in docker container Setting up spark is tricky. Therefore it is useful to try out things locally before deploying to the cluster. Docker is of a good help here. There is a great docker image to play with spark locally. gettyimages/docker-spark Examples Running SparkPi sample program (one …" />

        <meta property="og:site_name" content="sergem personal public notebook" />
        <meta property="og:type" content="article"/>
        <meta property="og:title" content="Spark in Docker with AWS credentials"/>
        <meta property="og:url" content="https://serge-m.github.io/spark-in-docker-with-aws-credentials.html"/>
        <meta property="og:description" content="Running spark in docker container Setting up spark is tricky. Therefore it is useful to try out things locally before deploying to the cluster. Docker is of a good help here. There is a great docker image to play with spark locally. gettyimages/docker-spark Examples Running SparkPi sample program (one …"/>
        <meta property="article:published_time" content="2018-07-29" />
            <meta property="article:section" content="misc" />
            <meta property="article:tag" content="spark" />
            <meta property="article:tag" content="python" />
            <meta property="article:tag" content="aws" />
            <meta property="article:author" content="SergeM" />


    <!-- Bootstrap -->
        <link rel="stylesheet" href="https://serge-m.github.io/theme/css/bootstrap.min.css" type="text/css"/>
    <link href="https://serge-m.github.io/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="https://serge-m.github.io/theme/css/pygments/native.css" rel="stylesheet">
    <link rel="stylesheet" href="https://serge-m.github.io/theme/css/style.css" type="text/css"/>

        <link href="https://serge-m.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="sergem personal public notebook ATOM Feed"/>

        <link href="https://serge-m.github.io/feeds/all.rss.xml" type="application/rss+xml" rel="alternate"
              title="sergem personal public notebook RSS Feed"/>


        <link href="https://serge-m.github.io/feeds/misc.atom.xml" type="application/atom+xml" rel="alternate"
              title="sergem personal public notebook misc ATOM Feed"/>

</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
	<div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="https://serge-m.github.io/" class="navbar-brand">
sergem personal public notebook            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                        <li class="active">
                            <a href="https://serge-m.github.io/category/misc.html">Misc</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->
<!-- Banner -->
<!-- End Banner -->
<div class="container">
    <div class="row">
        <div class="col-sm-9">
    <section id="content">
        <article>
            <header>
                <h1>
                    <a href="https://serge-m.github.io/spark-in-docker-with-aws-credentials.html"
                       rel="bookmark"
                       title="Permalink to Spark in Docker with AWS credentials">
                        Spark in Docker with AWS credentials
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2018-07-29T22:07:00+02:00"> 2018-07-29T22:07:00, Sun</time>
    </span>





<span class="label label-default">Tags</span>
	<a class="tag-list" href="https://serge-m.github.io/tag/spark.html">spark</a>
        /
	<a class="tag-list" href="https://serge-m.github.io/tag/python.html">python</a>
        /
	<a class="tag-list" href="https://serge-m.github.io/tag/aws.html">aws</a>
    
</footer><!-- /.post-info -->                </div>
                <h1>Running spark in docker container</h1>
<p>Setting up spark is tricky. Therefore it is useful to try out things locally before deploying to the cluster.</p>
<p>Docker is of a good help here.
There is a great docker image to play with spark locally.
<a href="https://github.com/gettyimages/docker-spark/">gettyimages/docker-spark</a></p>
<h2>Examples</h2>
<p>Running <code>SparkPi</code> sample program (one of the examples from the docs of Spark):</p>
<div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">run</span> <span class="c1">--rm -it -p 4040:4040 gettyimages/spark bin/run-example SparkPi 10</span>
</pre></div>


<p>Running a small example with Pyspark:</p>
<div class="highlight"><pre><span></span><span class="n">echo</span> <span class="o">-</span><span class="n">e</span> <span class="s2">&quot;import pyspark</span><span class="se">\n\n</span><span class="s2">print(pyspark.SparkContext().parallelize(range(0, 10)).count())&quot;</span> <span class="o">&gt;</span> <span class="n">count</span><span class="o">.</span><span class="n">py</span>
<span class="n">docker</span> <span class="n">run</span> <span class="o">--</span><span class="n">rm</span> <span class="o">-</span><span class="n">it</span> <span class="o">-</span><span class="n">p</span> <span class="mi">4040</span><span class="p">:</span><span class="mi">4040</span> <span class="o">-</span><span class="n">v</span> <span class="err">$</span><span class="p">(</span><span class="n">pwd</span><span class="p">)</span><span class="o">/</span><span class="n">count</span><span class="o">.</span><span class="n">py</span><span class="p">:</span><span class="o">/</span><span class="n">count</span><span class="o">.</span><span class="n">py</span> <span class="n">gettyimages</span><span class="o">/</span><span class="n">spark</span> <span class="nb">bin</span><span class="o">/</span><span class="n">spark</span><span class="o">-</span><span class="n">submit</span> <span class="o">/</span><span class="n">count</span><span class="o">.</span><span class="n">py</span>
</pre></div>


<p>Here we create a file with a python program outside of the docker. During <code>docker run</code> we map this file to the file inside the docker container with path <code>/count.py</code> and the we execute <code>bin/spark-submit</code> command that executes our code.</p>
<p>You can also run PySpark in interactive mode:</p>
<div class="highlight"><pre><span></span>$ <span class="nv">docker</span> <span class="nv">run</span> <span class="o">--</span><span class="nv">rm</span> <span class="o">-</span><span class="nv">it</span> <span class="o">-</span><span class="nv">p</span> <span class="mi">4040</span>:<span class="mi">4040</span>  <span class="nv">gettyimages</span><span class="o">/</span><span class="nv">spark</span> <span class="nv">bin</span><span class="o">/</span><span class="nv">pyspark</span>

<span class="nv">Python</span> <span class="mi">3</span>.<span class="mi">5</span>.<span class="mi">3</span> <span class="ss">(</span><span class="nv">default</span>, <span class="nv">Jan</span> <span class="mi">19</span> <span class="mi">2017</span>, <span class="mi">14</span>:<span class="mi">11</span>:<span class="mi">04</span><span class="ss">)</span> 
[<span class="nv">GCC</span> <span class="mi">6</span>.<span class="mi">3</span>.<span class="mi">0</span> <span class="mi">20170118</span>] <span class="nv">on</span> <span class="nv">linux</span>
<span class="nv">Type</span> <span class="s2">&quot;</span><span class="s">help</span><span class="s2">&quot;</span>, <span class="s2">&quot;</span><span class="s">copyright</span><span class="s2">&quot;</span>, <span class="s2">&quot;</span><span class="s">credits</span><span class="s2">&quot;</span> <span class="nv">or</span> <span class="s2">&quot;</span><span class="s">license</span><span class="s2">&quot;</span> <span class="k">for</span> <span class="nv">more</span> <span class="nv">information</span>.
<span class="mi">2018</span><span class="o">-</span><span class="mi">07</span><span class="o">-</span><span class="mi">29</span> <span class="mi">20</span>:<span class="mi">03</span>:<span class="mi">59</span> <span class="nv">WARN</span>  <span class="nv">NativeCodeLoader</span>:<span class="mi">60</span> <span class="o">-</span> <span class="nv">Unable</span> <span class="nv">to</span> <span class="nv">load</span> <span class="nv">native</span><span class="o">-</span><span class="nv">hadoop</span> <span class="nv">library</span> <span class="k">for</span> <span class="nv">your</span> <span class="nv">platform</span>... <span class="nv">using</span> <span class="nv">builtin</span><span class="o">-</span><span class="nv">java</span> <span class="nv">classes</span> <span class="nv">where</span> <span class="nv">applicable</span>
<span class="nv">Setting</span> <span class="nv">default</span> <span class="nv">log</span> <span class="nv">level</span> <span class="nv">to</span> <span class="s2">&quot;</span><span class="s">WARN</span><span class="s2">&quot;</span>.
<span class="nv">To</span> <span class="nv">adjust</span> <span class="nv">logging</span> <span class="nv">level</span> <span class="nv">use</span> <span class="nv">sc</span>.<span class="nv">setLogLevel</span><span class="ss">(</span><span class="nv">newLevel</span><span class="ss">)</span>. <span class="k">For</span> <span class="nv">SparkR</span>, <span class="nv">use</span> <span class="nv">setLogLevel</span><span class="ss">(</span><span class="nv">newLevel</span><span class="ss">)</span>.
<span class="nv">Welcome</span> <span class="nv">to</span>
      <span class="nv">____</span>              <span class="nv">__</span>
     <span class="o">/</span> <span class="nv">__</span><span class="o">/</span><span class="nv">__</span>  <span class="nv">___</span> <span class="nv">_____</span><span class="o">/</span> <span class="o">/</span><span class="nv">__</span>
    <span class="nv">_</span>\ \<span class="o">/</span> <span class="nv">_</span> \<span class="o">/</span> <span class="nv">_</span> `<span class="o">/</span> <span class="nv">__</span><span class="o">/</span>  <span class="s1">&#39;</span><span class="s">_/</span>
   <span class="o">/</span><span class="nv">__</span> <span class="o">/</span> .<span class="nv">__</span><span class="o">/</span>\<span class="nv">_</span>,<span class="nv">_</span><span class="o">/</span><span class="nv">_</span><span class="o">/</span> <span class="o">/</span><span class="nv">_</span><span class="o">/</span>\<span class="nv">_</span>\   <span class="nv">version</span> <span class="mi">2</span>.<span class="mi">3</span>.<span class="mi">1</span>
      <span class="o">/</span><span class="nv">_</span><span class="o">/</span>

<span class="nv">Using</span> <span class="nv">Python</span> <span class="nv">version</span> <span class="mi">3</span>.<span class="mi">5</span>.<span class="mi">3</span> <span class="ss">(</span><span class="nv">default</span>, <span class="nv">Jan</span> <span class="mi">19</span> <span class="mi">2017</span> <span class="mi">14</span>:<span class="mi">11</span>:<span class="mi">04</span><span class="ss">)</span>
<span class="nv">SparkSession</span> <span class="nv">available</span> <span class="nv">as</span> <span class="s1">&#39;</span><span class="s">spark</span><span class="s1">&#39;</span>.
<span class="o">&gt;&gt;&gt;</span> <span class="nv">sc</span>
<span class="o">&lt;</span><span class="nv">SparkContext</span> <span class="nv">master</span><span class="o">=</span><span class="nv">local</span>[<span class="o">*</span>] <span class="nv">appName</span><span class="o">=</span><span class="nv">PySparkShell</span><span class="o">&gt;</span>
<span class="o">&gt;&gt;&gt;</span> 
</pre></div>


<p>Now you can enter commands and evaluate your code in interactive mode. </p>
<h3>Running a cluster with <code>docker-compose</code></h3>
<p>One can use docker-compose.yaml file from <a href="https://github.com/gettyimages/docker-spark.git">https://github.com/gettyimages/docker-spark.git</a> to run a cluster locally.</p>
<p>docker-compose.yaml file looks like this:</p>
<div class="highlight"><pre><span></span><span class="nt">master</span><span class="p">:</span>
  <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">gettyimages/spark</span>
  <span class="nt">command</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">bin/spark-class org.apache.spark.deploy.master.Master -h master</span>
  <span class="nt">hostname</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">master</span>
  <span class="nt">environment</span><span class="p">:</span>
    <span class="nt">MASTER</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">spark://master:7077</span>
    <span class="nt">SPARK_CONF_DIR</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/conf</span>
    <span class="nt">SPARK_PUBLIC_DNS</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">localhost</span>
  <span class="nt">expose</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">7001</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">7002</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">7003</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">7004</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">7005</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">7006</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">7077</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">6066</span>
  <span class="nt">ports</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">4040:4040</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">6066:6066</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">7077:7077</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">8080:8080</span>
  <span class="nt">volumes</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">./conf/master:/conf</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">./data:/tmp/data</span>

<span class="nt">worker</span><span class="p">:</span>
  <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">gettyimages/spark</span>
  <span class="nt">command</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">bin/spark-class org.apache.spark.deploy.worker.Worker spark://master:7077</span>
  <span class="nt">hostname</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">worker</span>
  <span class="nt">environment</span><span class="p">:</span>
    <span class="nt">SPARK_CONF_DIR</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/conf</span>
    <span class="nt">SPARK_WORKER_CORES</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
    <span class="nt">SPARK_WORKER_MEMORY</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1g</span>
    <span class="nt">SPARK_WORKER_PORT</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8881</span>
    <span class="nt">SPARK_WORKER_WEBUI_PORT</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">8081</span>
    <span class="nt">SPARK_PUBLIC_DNS</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">localhost</span>
  <span class="nt">links</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">master</span>
  <span class="nt">expose</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">7012</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">7013</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">7014</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">7015</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">7016</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">8881</span>
  <span class="nt">ports</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">8081:8081</span>
  <span class="nt">volumes</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">./conf/worker:/conf</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">./data:/tmp/data</span>
</pre></div>


<p>Run it with command.</p>
<div class="highlight"><pre><span></span><span class="n">docker</span><span class="o">-</span><span class="n">compose</span> <span class="n">up</span>
</pre></div>


<p>It uses configs for master and worker nodes from <code>conf</code> directory.</p>
<h2>Accessing S3 from local Spark</h2>
<p>I want to do experiments locally on spark but my data is stored in the cloud - AWS S3. If I deploy spark on EMR credentials are automatically passed to spark from AWS. But locally it is not the case. In the simple case one can use environment variables to pass AWS credentials:</p>
<div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">run</span> <span class="c1">--rm -it -e &quot;AWS_ACCESS_KEY_ID=YOURKEY&quot; -e &quot;AWS_SECRET_ACCESS_KEY=YOURSECRET&quot; -p 4040:4040 gettyimages/spark bin/spark-shell</span>
</pre></div>


<h3>Loading credentials from <code>~/.aws/credentials</code></h3>
<p>If you want to use AWS S3 credentials from <code>~/.aws/credentials</code> you have to do some configuration.
in the previous cluster example one have to specify credentials provider. Add the following line to <code>spark-defaults.conf</code>:</p>
<div class="highlight"><pre><span></span><span class="n">spark</span><span class="p">.</span><span class="n">hadoop</span><span class="p">.</span><span class="n">fs</span><span class="p">.</span><span class="n">s3a</span><span class="p">.</span><span class="n">aws</span><span class="p">.</span><span class="n">credentials</span><span class="p">.</span><span class="n">provider</span> <span class="n">com</span><span class="p">.</span><span class="n">amazonaws</span><span class="p">.</span><span class="n">auth</span><span class="p">.</span><span class="n">profile</span><span class="p">.</span><span class="n">ProfileCredentialsProvider</span>
</pre></div>


<p>Let's say we want to run some code like this:</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pyspark.sql</span> <span class="kn">import</span> <span class="n">SparkSession</span>

<span class="n">spark</span> <span class="o">=</span> <span class="n">SparkSession</span> \
    <span class="o">.</span><span class="n">builder</span> \
    <span class="o">.</span><span class="n">getOrCreate</span><span class="p">()</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">read</span><span class="o">.</span><span class="n">parquet</span><span class="p">(</span><span class="s2">&quot;s3a://your_bucket/serge-m-test/data.parquet&quot;</span><span class="p">)</span>
<span class="n">data</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>


<p>Now if you configure the rest properly and run the cluster you can access your s3 data from local spark/docker container.</p>
<p>Without the configuration we would get the following error:</p>
<div class="highlight"><pre><span></span><span class="n">Caused</span> <span class="k">by</span><span class="p">:</span> <span class="n">com</span><span class="p">.</span><span class="n">amazonaws</span><span class="p">.</span><span class="n">AmazonClientException</span><span class="p">:</span> <span class="k">No</span> <span class="n">AWS</span> <span class="n">Credentials</span> <span class="n">provided</span> <span class="k">by</span> <span class="n">BasicAWSCredentialsProvider</span> <span class="n">EnvironmentVariableCredentialsProvider</span> <span class="n">InstanceProfileCredentialsProvider</span> <span class="p">:</span> <span class="n">com</span><span class="p">.</span><span class="n">amazonaws</span><span class="p">.</span><span class="n">SdkClientException</span><span class="p">:</span> <span class="n">Unable</span> <span class="k">to</span> <span class="k">load</span> <span class="n">credentials</span> <span class="k">from</span> <span class="n">service</span> <span class="n">endpoint</span>
</pre></div>


<p>That basically means that spark has three credentials proveders: BasicAWSCredentialsProvider EnvironmentVariableCredentialsProvider InstanceProfileCredentialsProvider. But none of them worked.</p>
<ul>
<li>EnvironmentVariableCredentialsProvider - one that loads the credentials from environment variables</li>
<li>InstanceProfileCredentialsProvider - one that works on AWS instances.</li>
<li>BasicAWSCredentialsProvider - I don't know what it is.</li>
</ul>
<p>What we need is ProfileCredentialsProvider. It reads the credentials from <code>~/.aws</code> directory.</p>
<h2>More about spark and aws</h2>
<p><a href="https://github.com/dimajix/docker-hadoop/blob/master/Dockerfile#L23">aws hadoop libraries (copying)</a></p>
<p><a href="https://medium.com/@subhojit20_27731/apache-spark-and-amazon-s3-gotchas-and-best-practices-a767242f3d98">Apache Spark and Amazon S3 — Gotchas and best practices</a></p>
<p><a href="https://aws.amazon.com/blogs/developer/secure-local-development-with-the-profilecredentialsprovider/">about profile credentials provider 1</a>
<a href="https://stackoverflow.com/questions/42669246/spark-is-inventing-his-own-aws-secretkey">about profile credentials provider 2</a></p>
<p><a href="https://hadoop.apache.org/docs/stable/hadoop-aws/tools/hadoop-aws/index.html#Features">about hadoop aws s3 access</a></p>
<p><a href="https://spark.apache.org/docs/latest/cluster-overview.html">about drivers</a></p>
<p><a href="https://www.slideshare.net/rjurney/predictive-analytics-with-airflow-and-pyspark">analytics with airflow and spark</a></p>
            </div>
            <!-- /.entry-content -->
    <hr/>
    <section class="comments" id="comments">
        <h2>Comments</h2>

        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'serge-m-github-io'; // required: replace example with your forum shortname

                    var disqus_identifier = 'spark-in-docker-with-aws-credentials';
                var disqus_url = 'https://serge-m.github.io/spark-in-docker-with-aws-credentials.html';

            var disqus_config = function () {
                this.language = "en";
            };

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by
            Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </section>
        </article>
    </section>

        </div>
        <div class="col-sm-3" id="sidebar">
            <aside>
<!-- Sidebar -->
<section class="well well-sm">
  <ul class="list-group list-group-flush">

<!-- Sidebar/Recent Posts -->
<li class="list-group-item">
  <h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Recent Posts</span></h4>
  <ul class="list-group" id="recentposts">
    <li class="list-group-item"><a href="https://serge-m.github.io/image-segmentation-with-unlabeled-areas-with-fast-ai.html">Image segmentation with unlabeled areas with fast.ai</a></li>
    <li class="list-group-item"><a href="https://serge-m.github.io/robocar.html">Robocar project</a></li>
    <li class="list-group-item"><a href="https://serge-m.github.io/ros-experience.html">ROS experience</a></li>
    <li class="list-group-item"><a href="https://serge-m.github.io/lenovo-e490.html">Lenovo E490 memory upgrade</a></li>
    <li class="list-group-item"><a href="https://serge-m.github.io/arduino-experiments.html">Arduino Experiments</a></li>
    <li class="list-group-item"><a href="https://serge-m.github.io/computer-vision-libraries.html">Computer vision libraries</a></li>
    <li class="list-group-item"><a href="https://serge-m.github.io/postgres-cheatsheet.html">Postgres cheatsheet</a></li>
    <li class="list-group-item"><a href="https://serge-m.github.io/jupyter-notebooks-on-emr.html">Jupyter notebooks on EMR</a></li>
    <li class="list-group-item"><a href="https://serge-m.github.io/spark-on-a-local-machine.html">Spark on a local machine</a></li>
    <li class="list-group-item"><a href="https://serge-m.github.io/gpio-controls-for-rasbperry-pi.html">GPIO controls for Rasbperry Pi</a></li>
    <li class="list-group-item"><a href="https://serge-m.github.io/disk-usage-ubuntu.html">Reducing disk usage in Ubuntu</a></li>
    <li class="list-group-item"><a href="https://serge-m.github.io/spark-in-docker-with-aws-credentials.html">Spark in Docker with AWS credentials</a></li>
  </ul>
</li>
<!-- End Sidebar/Recent Posts -->

<!-- Sidebar/Categories -->
<li class="list-group-item">
  <h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Categories</span></h4>
  <ul class="list-group" id="categories">
    <li class="list-group-item">
      <a href="https://serge-m.github.io/category/misc.html"><i class="fa fa-folder-open fa-lg"></i>misc</a>
    </li>
  </ul>
</li>
<!-- End Sidebar/Categories -->

<!-- Sidebar/Tag Cloud -->
<li class="list-group-item">
  <a href="https://serge-m.github.io/"><h4><i class="fa fa-tags fa-lg"></i><span class="icon-label">Tags</span></h4></a>
  <ul class="list-group list-inline tagcloud" id="tags">
    <li class="list-group-item tag-4">
      <a href="https://serge-m.github.io/tag/74hc595.html">74HC595</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/after-effects-aae.html">after effects (aae)</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://serge-m.github.io/tag/airflow.html">airflow</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://serge-m.github.io/tag/algorithm-performance.html">algorithm performance</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://serge-m.github.io/tag/argparse.html">argparse</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/avconv.html">avconv</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://serge-m.github.io/tag/aws.html">aws</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/best-practices.html">best practices</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/books.html">books</a>
    </li>
    <li class="list-group-item tag-1">
      <a href="https://serge-m.github.io/tag/c.html">c++</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://serge-m.github.io/tag/calendar.html">calendar</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/command-line.html">command line</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/computer-vision.html">computer vision</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/configuration.html">configuration</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://serge-m.github.io/tag/console.html">console</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://serge-m.github.io/tag/crawling.html">crawling</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/deep-learning.html">deep learning</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/dll.html">dll</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/docker.html">docker</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://serge-m.github.io/tag/draft.html">draft</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://serge-m.github.io/tag/ember.html">ember</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/errors.html">errors</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/ffmpeg.html">ffmpeg</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://serge-m.github.io/tag/flask.html">flask</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://serge-m.github.io/tag/fun.html">fun</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/git.html">git</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/hardware.html">hardware</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/html.html">html</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/image-processing.html">image processing</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/images.html">images</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/interview.html">interview</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://serge-m.github.io/tag/ipython.html">ipython</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/java.html">java</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/javascript.html">javascript</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/jupyter.html">jupyter</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://serge-m.github.io/tag/keys.html">keys</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://serge-m.github.io/tag/latex.html">latex</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://serge-m.github.io/tag/latex2rtf.html">latex2rtf</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://serge-m.github.io/tag/links.html">links</a>
    </li>
    <li class="list-group-item tag-1">
      <a href="https://serge-m.github.io/tag/linux.html">linux</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://serge-m.github.io/tag/linux-for-dummies.html">Linux for dummies</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/linux-mint.html">linux mint</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://serge-m.github.io/tag/logs.html">logs</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://serge-m.github.io/tag/machine-learning.html">machine learning</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/management.html">management</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://serge-m.github.io/tag/matlab.html">matlab</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://serge-m.github.io/tag/matting.html">matting</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/memory.html">memory</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://serge-m.github.io/tag/metric.html">metric</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://serge-m.github.io/tag/microservices.html">microservices</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://serge-m.github.io/tag/mint.html">mint</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://serge-m.github.io/tag/mixins.html">mixins</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://serge-m.github.io/tag/motor-shield.html">motor shield</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/nuke.html">nuke</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/numpy.html">numpy</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://serge-m.github.io/tag/opencv.html">opencv</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/openvpn.html">openvpn</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://serge-m.github.io/tag/optical-flow.html">optical flow</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/pelican.html">pelican</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://serge-m.github.io/tag/pi.html">pi</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://serge-m.github.io/tag/pylearn2.html">pylearn2</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://serge-m.github.io/tag/pypy.html">pypy</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/pytest.html">pytest</a>
    </li>
    <li class="list-group-item tag-1">
      <a href="https://serge-m.github.io/tag/python.html">python</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://serge-m.github.io/tag/raspberry.html">raspberry</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://serge-m.github.io/tag/raspberry-pi.html">raspberry pi</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/rest.html">REST</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://serge-m.github.io/tag/robocar.html">robocar</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/robotics.html">robotics</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/ros.html">ros</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://serge-m.github.io/tag/roto.html">roto</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://serge-m.github.io/tag/russian.html">russian</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://serge-m.github.io/tag/segmentation.html">segmentation</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/server.html">server</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://serge-m.github.io/tag/services.html">services</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://serge-m.github.io/tag/servo.html">servo</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://serge-m.github.io/tag/slides.html">slides</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/software.html">software</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/spark.html">spark</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/sql.html">sql</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://serge-m.github.io/tag/sqlalchemy.html">sqlalchemy</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/ssh.html">ssh</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/tensorflow.html">tensorflow</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/testing.html">testing</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://serge-m.github.io/tag/thinkpad.html">thinkpad</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://serge-m.github.io/tag/tikz.html">tikz</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://serge-m.github.io/tag/tools.html">tools</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/travisci.html">travisci</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://serge-m.github.io/tag/ubuntu.html">ubuntu</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://serge-m.github.io/tag/unittests.html">unittests</a>
    </li>
    <li class="list-group-item tag-1">
      <a href="https://serge-m.github.io/tag/useful.html">useful</a>
    </li>
    <li class="list-group-item tag-2">
      <a href="https://serge-m.github.io/tag/video.html">video</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://serge-m.github.io/tag/video-editing.html">video editing</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/video-processing.html">video processing</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/vim.html">vim</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/visual-studio.html">visual studio</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://serge-m.github.io/tag/wi-fi.html">wi-fi</a>
    </li>
    <li class="list-group-item tag-4">
      <a href="https://serge-m.github.io/tag/wifi.html">wifi</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/windows.html">windows</a>
    </li>
    <li class="list-group-item tag-3">
      <a href="https://serge-m.github.io/tag/youtube.html">youtube</a>
    </li>
  </ul>
</li>
<!-- End Sidebar/Tag Cloud -->

<!-- Sidebar/Links -->
<li class="list-group-item">
  <h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
  <ul class="list-group" id="links">
    <li class="list-group-item">
      <a href="/pages/collection-of-interesting-databases.html" target="_blank">Databases</a>
    </li>
    <li class="list-group-item">
      <a href="/pages/posts-by-year.html" target="_blank">Posts by year</a>
    </li>
    <li class="list-group-item">
      <a href="/books.html" target="_blank">Books</a>
    </li>
    <li class="list-group-item">
      <a href="/tag/useful.html" target="_blank">Useful</a>
    </li>
    <li class="list-group-item">
      <a href="/bjontegaard-metric-matlab-script.html" target="_blank">Bjontegaard metric in Matlab</a>
    </li>
    <li class="list-group-item">
      <a href="feeds/all.rss.xml" target="_blank">RSS</a>
    </li>
    <li class="list-group-item">
      <a href="feeds/all.atom.xml" target="_blank">Atom</a>
    </li>
  </ul>
</li>
<!-- End Sidebar/Links -->
  </ul>
</section>
<!-- End Sidebar -->            </aside>
        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2019 sergem
            &middot; 
            <small>
               <a href="http://platformxy.com">platformxy.com</a>
            </small>         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="https://serge-m.github.io/theme/js/jquery.min.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="https://serge-m.github.io/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="https://serge-m.github.io/theme/js/respond.min.js"></script>

    <!-- Disqus -->
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'serge-m-github-io'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script');
            s.async = true;
            s.type = 'text/javascript';
            s.src = '//' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <!-- End Disqus Code -->
    <!-- Google Analytics -->
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-40853494-2']);
        _gaq.push(['_trackPageview']);

        (function () {
            var ga = document.createElement('script');
            ga.type = 'text/javascript';
            ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(ga, s);
        })();
    </script>
    <!-- End Google Analytics Code -->


</body>
</html>