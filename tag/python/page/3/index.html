<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>python | sergem's personal public notebook</title><meta name=keywords content><meta name=description content="Personal public notebook"><meta name=author content="serge-m"><link rel=canonical href=https://serge-m.github.io/tags/python/><link href=/assets/css/stylesheet.min.6d98a2276d0cb41ef459267b3ff3ef02df70a8f16b70bbc52b20568702bc90cf.css integrity="sha256-bZiiJ20MtB70WSZ7P/PvAt9wqPFrcLvFKyBWhwK8kM8=" rel="preload stylesheet" as=style><link rel=icon href=https://serge-m.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://serge-m.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://serge-m.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://serge-m.github.io/apple-touch-icon.png><link rel=mask-icon href=https://serge-m.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.101.0"><link rel=alternate type=application/rss+xml href=https://serge-m.github.io/tags/python/index.xml><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-40853494-2","auto"),ga("send","pageview"))</script><meta property="og:title" content="python"><meta property="og:description" content="Personal public notebook"><meta property="og:type" content="website"><meta property="og:url" content="https://serge-m.github.io/tags/python/"><meta property="og:image" content="https://serge-m.github.io/papermod-cover.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://serge-m.github.io/papermod-cover.png"><meta name=twitter:title content="python"><meta name=twitter:description content="Personal public notebook"></head><body class=list id=top><script>window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://serge-m.github.io/ accesskey=h title="Home (Alt + H)">Home</a>
<span class=logo-switches></span></div><ul id=menu onscroll=menu_on_scroll()><li><a href=https://serge-m.github.io/archives title=Archive><span>Archive</span></a></li><li><a href=https://serge-m.github.io/categories/ title=Categories><span>Categories</span></a></li><li><a href=https://serge-m.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://serge-m.github.io/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://serge-m.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://serge-m.github.io/tags/>Tags</a></div><h1>python</h1></header><article class="post-entry tag-entry"><header class=entry-header><h2>Rest API for TensorFlow model</h2></header><section class=entry-content><p>TensorFlow Serving, sources - library for serving machine learning models. Written in C++ and Python. Server is in C++. Requires Bazel - Google’s build tool. Doesn’t work with python 3. Probably fast.
TensorFlow: How to freeze a model and serve it with a python API
Building a Machine Learning App with AWS Lambda (slides)
Pipeline.io - End-to-End, Continuous Spark ML + Tensorflow AI Data Pipelines, Sources
Interesting thread. They propose to use “saved_model_cli binary (in tools/), which you can feed a SavedModel, and pass input data via files....</p></section><footer class=entry-footer>May 21, 2017&nbsp;·&nbsp;SergeM</footer><a class=entry-link aria-label="post link to Rest API for TensorFlow model" href=https://serge-m.github.io/posts/rest-api-for-tensorflow-model/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Mocking in Python</h2></header><section class=entry-content><p>Let’s consider how python standard unittest module suppose to use mocks.
Assume we want to test a method that creates and uses objects of other classes:
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 # content of module.py # classes that we want to mock class ClassName1: pass class ClassName2: pass # class that we want to test class ProductionClass: def foo(self, parameter1, parameter2): object1 = module....</p></section><footer class=entry-footer>March 6, 2017&nbsp;·&nbsp;SergeM</footer><a class=entry-link aria-label="post link to Mocking in Python" href=https://serge-m.github.io/posts/mocking-in-python/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Correct way of running long tasks in Flask</h2></header><section class=entry-content><p>Key to the answer is Celery.
Good post: Using Celery With Flask
Sources
See also: Making an asynchronous task in Flask
Sharing memory and using multiprocessing along with gunicorn seem to be wrong solutions.</p></section><footer class=entry-footer>January 23, 2017&nbsp;·&nbsp;SergeM</footer><a class=entry-link aria-label="post link to Correct way of running long tasks in Flask" href=https://serge-m.github.io/posts/correct-way-of-running-long-tasks-in-flask/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Image processing in Python</h2></header><section class=entry-content><p>Image search using elastic search Comparison of Image Search Performance using different kinds of vectors
Plugin for elastic search
Personalizing image search with feature vectors and Lucene (video)
Operations on images in python How to set thresholds for Canny edge detector in openCV Zero-parameter, automatic Canny edge detection with Python and OpenCV
1 2 3 4 5 6 7 8 9 10 11 def auto_canny(image, sigma=0.33): # compute the median of the single channel pixel intensities v = np....</p></section><footer class=entry-footer>January 15, 2017&nbsp;·&nbsp;SergeM</footer><a class=entry-link aria-label="post link to Image processing in Python" href=https://serge-m.github.io/posts/image-processing-in-python/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Run docker as pytest fixture</h2></header><section class=entry-content><p>I need to test external API or perform integration test for my application. The extenal application can be accessible through docker image. I want to write a test that has
docker run as set-up step docker stop/docker rm as tear down step As an example lets consider Seaweedfs as external API. SeaweedFS is a simple and highly scalable distributed file system. To run it you need to run master and slave images....</p></section><footer class=entry-footer>December 19, 2016&nbsp;·&nbsp;SergeM</footer><a class=entry-link aria-label="post link to Run docker as pytest fixture" href=https://serge-m.github.io/posts/run-docker-as-pytest-fixture/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Testing json responses in Flask REST apps with pytest</h2></header><section class=entry-content><p>Testing is an essential part of software developmnet process. Unfortunately best prictives for python are established not as good as for example in Java world. Here I try to explain how to test Flask-based web applications. We want to test endpoints behaviour including status codes and parameters encoding. It means testing of handler functions for those endpoints is not enough.
Tests for endpoints can be considered/used as high-level acceptance tests....</p></section><footer class=entry-footer>November 27, 2016&nbsp;·&nbsp;SergeM</footer><a class=entry-link aria-label="post link to Testing json responses in Flask REST apps with pytest" href=https://serge-m.github.io/posts/testing-json-responses-in-flask-rest-apps-with-pytest/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Refactoring python code. Extracting variables and other.</h2></header><section class=entry-content><p>Pycon2016 talk by Brett Slatkin Example 1: Extract variable
import random month = random.choice(MONTHS) if (month.lower().endswith('r') or month.lower().endswith('ary')): print('%s is a good time to eat oysters' % month) elif 8 > MONTHS.index(month) > 4: print('%s is a good time to eat tomatoes' % month) else: print('%s is a good time to eat asparagus' % month) Becomes:
class OystersGood: def __init__(self, month): month = month month_lowered = month.lower() self.ends_in_r = month_lowered.endswith('r') self....</p></section><footer class=entry-footer>October 8, 2016&nbsp;·&nbsp;SergeM</footer><a class=entry-link aria-label="post link to Refactoring python code. Extracting variables and other." href=https://serge-m.github.io/posts/refactoring-python-extract-variable/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>Useful python links</h2></header><section class=entry-content><p>Books Test-Driven Development with Python Harry Percival
Python Testing with unittest, nose, pytest : eBook
Testing Python: Applying Unit Testing, TDD, BDD and Acceptance Testing link .
Videos Outside-In TDD Harry Percival, PyCon 2016
Докеризация веб приложения на Python, Антон Егоров
Thinking about Concurrency, Raymond Hettinger, Python core developer
Tutorials Разработка идеального pypi пакета с поддержкой разных версий python (Rus), 2020.
The Little Book of Python Anti-Patterns - an awesome collection of best practices with examples....</p></section><footer class=entry-footer>October 8, 2016&nbsp;·&nbsp;SergeM</footer><a class=entry-link aria-label="post link to Useful python links" href=https://serge-m.github.io/posts/useful-python-links/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>pypy with numpy</h2></header><section class=entry-content><p>Looks like pypy now can build numpy. Well, a slightly modified numpy.
Get default branch of pypy. be careful cause the developers don’t maintain default branch compilable. Revision 84341 (c86b42dd7613) works for me.
compile using
./rpython/bin/rpython -O2 ./pypy/goal/targetpypystandalone.py --withoutmod-micronumpy Create package and vitual environment. Something like this:
./pypy/tool/release/package.py --targetdir ./my_builds/build.tar.bz2 --builddir ./tmp/ --nostrip --archive-name pypy_84341 Needed to copy pypy-c and libpypy to pypy/goal beforehand.
Clone and follow instructions from https://github.com/pypy/numpy/commits/cpyext-ext Revision 3299d0d76fdb831fbcb4429a89c1f53bb36ea07f worked for me...</p></section><footer class=entry-footer>May 16, 2016&nbsp;·&nbsp;SergeM</footer><a class=entry-link aria-label="post link to pypy with numpy" href=https://serge-m.github.io/posts/pypy-with-numpy/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>About python</h2></header><section class=entry-content><p>Production Database helpers for sqlalchemy Backend-agnostic database creation (CREATE IF NOT EXISTS):
1 2 if not database_exists('postgres://postgres@localhost/name'): create_database('postgres://postgres@localhost/name') Possible with SQLAlchemy-Utils library. See docs
Infrastructure with Python http://dustinrcollins.com/infrastructure-with-python – list of tools for python development
Retry libraries for python tenacity - a fork of retrying. Seems alive and powerful.
retrying - abandoned but popular project.
backoff
Language Cheat Sheet: Writing Python 2-3 compatible code http://python-future.org/compatible_idioms.html
Google Python Guidelines https://google.github.io/styleguide/pyguide.html
Inheritance https://rhettinger....</p></section><footer class=entry-footer>May 1, 2016&nbsp;·&nbsp;SergeM</footer><a class=entry-link aria-label="post link to About python" href=https://serge-m.github.io/posts/about-python/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://serge-m.github.io/tags/python/page/2/>« Prev Page</a>
<a class=next href=https://serge-m.github.io/tags/python/page/4/>Next Page »</a></nav></footer></main><footer class=footer><span>&copy; 2022 <a href=https://serge-m.github.io/>sergem's personal public notebook</a></span>
<span>&#183;</span>
<span>Powered by <a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a></span>
<span>&#183;</span>
<span>Theme <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>window.onload=function(){localStorage.getItem("menu-scroll-position")&&(document.getElementById("menu").scrollLeft=localStorage.getItem("menu-scroll-position"))};function menu_on_scroll(){localStorage.setItem("menu-scroll-position",document.getElementById("menu").scrollLeft)}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script></body></html>