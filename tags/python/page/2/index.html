<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>python | sergem&#39;s personal public notebook</title>
<meta name="keywords" content="" />
<meta name="description" content="Personal public notebook">
<meta name="author" content="serge-m">
<link rel="canonical" href="https://serge-m.github.io/tags/python/" />
<link href="/assets/css/stylesheet.min.6d98a2276d0cb41ef459267b3ff3ef02df70a8f16b70bbc52b20568702bc90cf.css" integrity="sha256-bZiiJ20MtB70WSZ7P/PvAt9wqPFrcLvFKyBWhwK8kM8=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://serge-m.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://serge-m.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://serge-m.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://serge-m.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://serge-m.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.92.1" />
<link rel="alternate" type="application/rss&#43;xml" href="https://serge-m.github.io/tags/python/index.xml">

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-40853494-2', 'auto');
	
	ga('send', 'pageview');
}
</script><meta property="og:title" content="python" />
<meta property="og:description" content="Personal public notebook" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://serge-m.github.io/tags/python/" /><meta property="og:image" content="https://serge-m.github.io/papermod-cover.png"/>

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://serge-m.github.io/papermod-cover.png"/>

<meta name="twitter:title" content="python"/>
<meta name="twitter:description" content="Personal public notebook"/>

</head>

<body class="list" id="top">
<script>
    if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<noscript>
    <style type="text/css">
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: #1d1e20;
                --entry: #2e2e33;
                --primary: rgba(255, 255, 255, 0.84);
                --secondary: rgba(255, 255, 255, 0.56);
                --tertiary: rgba(255, 255, 255, 0.16);
                --content: rgba(255, 255, 255, 0.74);
                --hljs-bg: #2e2e33;
                --code-bg: #37383e;
                --border: #333;
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://serge-m.github.io/" accesskey="h" title="Home (Alt + H)">Home</a>
            <span class="logo-switches">
            </span>
        </div>
        <ul id="menu" onscroll="menu_on_scroll()">
            <li>
                <a href="https://serge-m.github.io/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://serge-m.github.io/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="https://serge-m.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://serge-m.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header"><div class="breadcrumbs"><a href="https://serge-m.github.io/">Home</a>&nbsp;»&nbsp;<a href="https://serge-m.github.io/tags/">Tags</a></div>
  <h1>python</h1>
</header>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2>Select lines matching regular expression in python</h2>
  </header>
  <section class="entry-content">
    <p>Given a text file we want to create another file containing only those lines that match a certain regular expression using python3
1 2 3 4 5 6  import re with open(&#34;./in.txt&#34;, &#34;r&#34;) as input_file, open(&#34;out.txt&#34;, &#34;w&#34;) as output_file: for line in input_file: if re.match(&#34;(.*)import(.*)&#34;, line): print(line, file=output_file)   </p>
  </section>
  <footer class="entry-footer">February 26, 2018&nbsp;·&nbsp;SergeM</footer>
  <a class="entry-link" aria-label="post link to Select lines matching regular expression in python" href="https://serge-m.github.io/posts/print-lines-matching-regex/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2>Workflow management with Apache Airflow</h2>
  </header>
  <section class="entry-content">
    <p>Some useful resources about Airflow:
ETL best practices with Airflow
Series of articles about Airflow in production:
 Part 1 - about usecases and alternatives Part 2 - about alternatives (Luigi and Paitball) Part 3 - key concepts Part 4 - deployment, issues  More notes about production About start_time: Why isn’t my task getting scheduled?
One cannot specify datetime.now() as start_date. Instead one has to provide datetime object without timezone....</p>
  </section>
  <footer class="entry-footer">February 6, 2018&nbsp;·&nbsp;SergeM</footer>
  <a class="entry-link" aria-label="post link to Workflow management with Apache Airflow" href="https://serge-m.github.io/posts/airflow/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2>Datetime in Python</h2>
  </header>
  <section class="entry-content">
    <p>Conversion from calendar week to date Sometimes one has to convert a date written as year, calendar week (CW), and day of week to an actual date with month and date. The behaviour in the begin/end of a year may be not straightforward. For example according to ISO 8601 monday date of the CW 1 year 2019 is 31 January 2018. As far as I can see there is no standard function for conversion in python....</p>
  </section>
  <footer class="entry-footer">January 17, 2018&nbsp;·&nbsp;SergeM</footer>
  <a class="entry-link" aria-label="post link to Datetime in Python" href="https://serge-m.github.io/posts/datetime-in-python/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2>Flask and SQLAlchemy explained</h2>
  </header>
  <section class="entry-content">
    <p>Awesome explanation of SQLAlchemy with examples and comparison to Django by Armin Ronacher: SQLAlchemy and You
Flask-SQLAlchemy module Flask-SQLAlchemy is an extension for Flask that adds support for SQLAlchemy to your application.
How to add SQLAlchemy to Flask application:
from flask import Flask from flask_sqlalchemy import SQLAlchemy app = Flask(__name__) # configuration of the DB is read from flask configuration storage app.config[&#39;SQLALCHEMY_DATABASE_URI&#39;] = &#39;sqlite:////tmp/test.db&#39; # here we define db object that keeps track of sql interactions db = SQLAlchemy(app) Now we are ready to define tables and objects using predefined db....</p>
  </section>
  <footer class="entry-footer">January 11, 2018&nbsp;·&nbsp;SergeM</footer>
  <a class="entry-link" aria-label="post link to Flask and SQLAlchemy explained" href="https://serge-m.github.io/posts/flask-and-sqlalchemy-explained/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2>Pytest cheatsheet</h2>
  </header>
  <section class="entry-content">
    <p>Pytest is a powerful tool for testing in python. Here are some notes about hands-on experience.
Running tests in pytest with/without a specified mark Execute
pytest -m &#34;integration&#34; if you want to run only tests that have “@pytest.mark.integration” annotation.
Similarly you can run only tests that don’t are not marked.
pytest -m &#34;not your_mark&#34; That command will test everything that is not marked as “your_mark”.
How to verify exception message using pytest One can use context manager pytest....</p>
  </section>
  <footer class="entry-footer">January 2, 2018&nbsp;·&nbsp;SergeM</footer>
  <a class="entry-link" aria-label="post link to Pytest cheatsheet" href="https://serge-m.github.io/posts/pytest-cheatsheet/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2>Sample project with Ember and Flask</h2>
  </header>
  <section class="entry-content">
    <p>I want to use EmberJS with Flask application. Flask will provide an API. Ember frontend will consume and display data from the Flask backend.
Let’s say we want our fronted to display a list of users of the system. We will have a main page and users page in our frontend. On the users page the client will see a list of users that we get from backend.
Source code is here: ember_flask_example...</p>
  </section>
  <footer class="entry-footer">October 25, 2017&nbsp;·&nbsp;SergeM</footer>
  <a class="entry-link" aria-label="post link to Sample project with Ember and Flask" href="https://serge-m.github.io/posts/sample-ember-and-flask/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2>Speed up make/cmake build with multiprocessing</h2>
  </header>
  <section class="entry-content">
    <p>Build time can be reduced by using multiple cores of your processor.
Parallelization for make:
make -j8 Parallelization for cmake:
cmake --build &lt;bindir&gt; -- -j 8 Sometimes you cannot pass parameters directly to make. For example you are installing a python module using
python setup.py install Setup script doesn’t accept parameters. Then you could pass them through environment variables:
export MAKEFLAGS=&#34;-j 8&#34; see also
 intro to CMake video, russian.  </p>
  </section>
  <footer class="entry-footer">July 29, 2017&nbsp;·&nbsp;SergeM</footer>
  <a class="entry-link" aria-label="post link to Speed up make/cmake build with multiprocessing" href="https://serge-m.github.io/posts/parallel-builds/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2>Add months to datetime in python</h2>
  </header>
  <section class="entry-content">
    <p>1 2 3 4 5  import datetime from dateutil.relativedelta import relativedelta your_datetime = datetime.datetime.now() your_datetime &#43; relativedelta(months=1) # adds one month   That function clips the overflowing day of the months:
1 2 3 4 5 6 7 8 9 10  &gt;&gt;&gt; datetime(2021, 1, 28) &#43; relativedelta(months=1) datetime.datetime(2021, 2, 28, 0, 0) &gt;&gt;&gt; datetime(2021, 1, 29) &#43; relativedelta(months=1) datetime.datetime(2021, 2, 28, 0, 0) &gt;&gt;&gt; datetime(2021, 1, 30) &#43; relativedelta(months=1) datetime....</p>
  </section>
  <footer class="entry-footer">July 20, 2017&nbsp;·&nbsp;SergeM</footer>
  <a class="entry-link" aria-label="post link to Add months to datetime in python" href="https://serge-m.github.io/posts/add-months-to-datetime-in-python/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2>Module import in python</h2>
  </header>
  <section class="entry-content">
    <p>Import module by path/name 1 2  import importlib module = importlib.import_module(module_path)   Find class implementing certain interface in a module 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  def load_class_from_module(module_path: str, target_class: type) -&gt; type: module = importlib.import_module(module_path) list_classes = get_all_classes_implementing_interface(module, target_class) if not list_classes: raise RuntimeError(&#34;Unable to find implemented interface {}in {}&#34;.format(target_class, module_path)) if len(list_classes) &gt; 1: raise RuntimeError(&#34;More then 1 implementation of {}was found in {}&#34;....</p>
  </section>
  <footer class="entry-footer">July 9, 2017&nbsp;·&nbsp;SergeM</footer>
  <a class="entry-link" aria-label="post link to Module import in python" href="https://serge-m.github.io/posts/module-import-in-python/"></a>
</article>

<article class="post-entry tag-entry"> 
  <header class="entry-header">
    <h2>Argparse recipies</h2>
  </header>
  <section class="entry-content">
    <p>How to include default values in ‘–help’ 1 2 3  parser = argparse.ArgumentParser( # ... other options ... formatter_class=argparse.ArgumentDefaultsHelpFormatter)   Output looks like this:
1 2 3  --scan-time [SCAN_TIME] Wait SCAN-TIME seconds between status checks. (default: 5)   Another tip: add ‘%(default)’ to the help parameter to control what is displayed.
1 2  parser.add_argument(&#34;--type&#34;, default=&#34;toto&#34;, choices=[&#34;toto&#34;,&#34;titi&#34;], help = &#34;type (default: %(default)s)&#34;)   source</p>
  </section>
  <footer class="entry-footer">June 24, 2017&nbsp;·&nbsp;SergeM</footer>
  <a class="entry-link" aria-label="post link to Argparse recipies" href="https://serge-m.github.io/posts/python-argparse-recipies/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="prev" href="https://serge-m.github.io/tags/python/">« Prev Page</a>
    <a class="next" href="https://serge-m.github.io/tags/python/page/3/">Next Page »</a>
  </nav>
</footer>
    </main>
    <footer class="footer">
    <span>&copy; 2022 <a href="https://serge-m.github.io/">sergem&#39;s personal public notebook</a></span>
    <span>&middot;</span>
    <span>Powered by <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a></span>
    <span>&middot;</span>
    <span>Theme <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a></span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)">
    <button class="top-link" id="top-link" type="button" accesskey="g">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z" />
        </svg>
    </button>
</a>

<script>
    window.onload = function () {
        if (localStorage.getItem("menu-scroll-position")) {
            document.getElementById('menu').scrollLeft = localStorage.getItem("menu-scroll-position");
        }
    }

    function menu_on_scroll() {
        localStorage.setItem("menu-scroll-position", document.getElementById('menu').scrollLeft);
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
</body>

</html>
